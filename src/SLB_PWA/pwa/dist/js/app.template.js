(function(){var e={6700:function(e,s,t){var o={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function i(e){var s=a(e);return t(s)}function a(e){if(!t.o(o,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=6700},5396:function(e,s,t){"use strict";var o=t(9242),i=t(3396);function a(e,s,t,o,a,l){const n=(0,i.up)("TabsList"),r=(0,i.up)("PWAPrompt");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onApplyShop:l.applyShop,isShopsEnabled:l.isShopsEnabled},null,8,["onApplyShop","isShopsEnabled"]),(0,i.Wm)(r)])}var l=t(7139);function n(e,s,t,a,n,r){const u=(0,i.up)("font-awesome-icon"),d=(0,i.up)("ShopsTab"),m=(0,i.up)("b-tab"),c=(0,i.up)("ShopTitle"),h=(0,i.up)("UpcomingReservationsTab"),p=(0,i.up)("ReservationsCalendarTab"),f=(0,i.up)("CustomersAddressBookTab"),g=(0,i.up)("b-tabs");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)({"hide-tabs-header":e.isHideTabsHeader})},[(0,i.Wm)(g,{pills:"",card:"",end:""},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(m,{active:r.isActiveTab("#shops"),"title-item-class":{hide:!t.isShopsEnabled}},{title:(0,i.w5)((()=>[(0,i._)("span",{onClick:s[0]||(s[0]=e=>r.click("#shops"))},[(0,i.Wm)(u,{icon:"fa-solid fa-store"})])])),default:(0,i.w5)((()=>[(0,i.Wm)(d,{onApplyShop:r.applyShop},null,8,["onApplyShop"])])),_:1},8,["active","title-item-class"]),[[o.F8,t.isShopsEnabled]]),(0,i.Wm)(m,{active:r.isActiveTab("#upcoming-reservations")},{title:(0,i.w5)((()=>[(0,i._)("span",{onClick:s[1]||(s[1]=e=>r.click("#upcoming-reservations")),ref:"upcoming-reservations-tab-link"},[(0,i.Wm)(u,{icon:"fa-solid fa-list"})],512)])),default:(0,i.w5)((()=>[(0,i.Wm)(c,{shop:e.shop},null,8,["shop"]),(0,i.Wm)(h,{shop:e.shop,onHideTabsHeader:r.hideTabsHeader},null,8,["shop","onHideTabsHeader"])])),_:1},8,["active"]),(0,i.Wm)(m,{active:r.isActiveTab("#reservations-calendar")},{title:(0,i.w5)((()=>[(0,i._)("span",{onClick:s[2]||(s[2]=e=>r.click("#reservations-calendar"))},[(0,i.Wm)(u,{icon:"fa-solid fa-calendar-days"})])])),default:(0,i.w5)((()=>[(0,i.Wm)(c,{shop:e.shop},null,8,["shop"]),(0,i.Wm)(p,{shop:e.shop,onHideTabsHeader:r.hideTabsHeader},null,8,["shop","onHideTabsHeader"])])),_:1},8,["active"]),(0,i.Wm)(m,{active:r.isActiveTab("#customers")},{title:(0,i.w5)((()=>[(0,i._)("span",{onClick:s[3]||(s[3]=e=>r.click("#customers"))},[(0,i.Wm)(u,{icon:"fa-regular fa-address-book"})])])),default:(0,i.w5)((()=>[(0,i.Wm)(c,{shop:e.shop},null,8,["shop"]),(0,i.Wm)(f,{shop:e.shop,onHideTabsHeader:r.hideTabsHeader},null,8,["shop","onHideTabsHeader"])])),_:1},8,["active"])])),_:1})],2)}function r(e,s,t,a,l,n){const r=(0,i.up)("ImagesList"),u=(0,i.up)("CustomersAddressBook"),d=(0,i.up)("EditBookingItem"),m=(0,i.up)("BookingDetails"),c=(0,i.up)("UpcomingReservations");return(0,i.wg)(),(0,i.iD)("div",null,[e.isShowCustomerImages?((0,i.wg)(),(0,i.j4)(r,{key:0,customer:e.showImagesCustomer,onClose:n.closeShowCustomerImages,onTakePhoto:e.showTakePhoto,takePhotoFile:e.photo},null,8,["customer","onClose","onTakePhoto","takePhotoFile"])):e.isChooseCustomer?((0,i.wg)(),(0,i.j4)(u,{key:1,onCloseChooseCustomer:n.closeChooseCustomer,chooseCustomerAvailable:!0,onChoose:n.choose,shop:e.item.shop},null,8,["onCloseChooseCustomer","onChoose","shop"])):e.editItem?((0,i.wg)(),(0,i.j4)(d,{key:2,booking:e.item,customer:e.customer,onClose:n.closeEditItem,onChooseCustomer:n.chooseCustomer},null,8,["booking","customer","onClose","onChooseCustomer"])):e.showItem?((0,i.wg)(),(0,i.j4)(m,{key:3,booking:e.item,onClose:n.closeShowItem,onEdit:n.setEditItem,onShowCustomerImages:n.showCustomerImages},null,8,["booking","onClose","onEdit","onShowCustomerImages"])):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(c,{onShowItem:n.setShowItem,shop:t.shop},null,8,["onShowItem","shop"]),[[o.F8,!e.showItem]])])}const u={class:"title"},d={class:"search"},m={class:"hours"},c={class:"attendants"},h={class:"bookings-list"},p={key:2,class:"no-result"};function f(e,s,t,o,a,n){const r=(0,i.up)("font-awesome-icon"),f=(0,i.up)("b-form-input"),g=(0,i.up)("b-button"),w=(0,i.up)("b-col"),v=(0,i.up)("b-row"),b=(0,i.up)("b-spinner"),_=(0,i.up)("BookingItem");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",u,(0,l.zw)(this.getLabel("upcomingReservationsTitle")),1),(0,i._)("div",d,[(0,i.Wm)(r,{icon:"fa-solid fa-magnifying-glass",class:"search-icon"}),(0,i.Wm)(f,{modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=s=>e.search=s),class:"search-input"},null,8,["modelValue"]),e.search?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"fa-solid fa-circle-xmark",class:"clear",onClick:s[1]||(s[1]=s=>e.search="")})):(0,i.kq)("",!0)]),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.hours,(s=>((0,i.wg)(),(0,i.j4)(g,{key:s.hours,onClick:t=>e.hourValue=s.hours,pressed:e.hourValue===s.hours,variant:"outline-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(s.label),1)])),_:2},1032,["onClick","pressed"])))),128))])])),_:1})])),_:1}),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.attendants,(s=>((0,i.wg)(),(0,i.j4)(g,{key:s.id,variant:"outline-primary",pressed:e.filterAttendant===s.id,onClick:t=>e.filterAttendant===s.id?e.filterAttendant="":e.filterAttendant=s.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(s.name),1)])),_:2},1032,["pressed","onClick"])))),128))])])),_:1})])),_:1}),(0,i._)("div",h,[e.isLoading?((0,i.wg)(),(0,i.j4)(b,{key:0,variant:"primary"})):n.filteredBookingsList.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(n.filteredBookingsList,(e=>((0,i.wg)(),(0,i.j4)(_,{key:e.id,booking:e,onDeleteItem:s=>n.deleteItem(e.id),onShowDetails:s=>n.showDetails(e)},null,8,["booking","onDeleteItem","onShowDetails"])))),128)):((0,i.wg)(),(0,i.iD)("span",p,(0,l.zw)(this.getLabel("upcomingReservationsNoResultLabel")),1))])])}const g={class:"booking"},w={class:"customer-info-status-customer-wrapper"},v={class:"customer"},b={class:"id"},_={class:"booking-info-date-time-wrapper"},k={class:"date"},y={class:"time"},L={class:"total"},C=["innerHTML"],S={class:"booking-assistant-info"},W={class:"delete"},D={class:"booking-actions-remaining-amount"},I={class:"details-link"},j={class:"delete-btn-wrapper"},A={class:"delete-btn-wrapper-text"};function T(e,s,t,a,n,r){const u=(0,i.up)("b-col"),d=(0,i.up)("b-row"),m=(0,i.up)("font-awesome-icon"),c=(0,i.up)("PayRemainingAmount"),h=(0,i.up)("b-button");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"booking-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("div",g,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"customer-info"},{default:(0,i.w5)((()=>[(0,i._)("div",w,[(0,i._)("span",{class:"status",style:(0,l.j5)("background-color:"+r.statusColor)},null,4),(0,i._)("span",v,(0,l.zw)(r.customer),1)]),(0,i._)("span",b,(0,l.zw)(r.id),1)])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"booking-info"},{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i._)("span",k,(0,l.zw)(r.date),1),(0,i._)("span",y,(0,l.zw)(r.fromTime)+"-"+(0,l.zw)(r.toTime),1)]),(0,i._)("span",L,[(0,i._)("span",{innerHTML:r.totalSum},null,8,C)])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",S,(0,l.zw)(r.assistants.map((e=>e.name)).join(" | ")),1)])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"booking-actions-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("span",W,[(0,i.Wm)(m,{icon:"fa-solid fa-trash",onClick:s[0]||(s[0]=s=>e.isDelete=!0)})]),(0,i._)("span",D,[(0,i.Wm)(c,{booking:t.booking},null,8,["booking"]),(0,i._)("span",I,[(0,i.Wm)(m,{icon:"fa-solid fa-chevron-right",onClick:r.showDetails},null,8,["onClick"])])])])),_:1})])),_:1})]),e.isDelete?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",{class:"delete-backdrop",onClick:s[1]||(s[1]=s=>e.isDelete=!1)}),(0,i._)("div",j,[(0,i._)("p",A,(0,l.zw)(this.getLabel("deleteBookingConfirmText")),1),(0,i._)("p",null,[(0,i.Wm)(h,{variant:"primary",onClick:r.deleteItem,class:"delete-btn-wrapper-button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("deleteBookingButtonLabel")),1)])),_:1},8,["onClick"])]),(0,i._)("p",null,[(0,i._)("a",{href:"#",class:"delete-btn-wrapper-go-back",onClick:s[2]||(s[2]=(0,o.iM)((s=>e.isDelete=!1),["prevent"]))},(0,l.zw)(this.getLabel("deleteBookingGoBackLabel")),1)])])],64)):(0,i.kq)("",!0)])),_:1})])),_:1})}var x=t.p+"img/requestpayment.png";const z={class:"remaining-amount-payment-link"};function V(e,s,t,a,n,r){const u=(0,i.up)("b-spinner"),d=(0,i.up)("b-alert");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("span",z,[(0,i._)("img",{src:x,onClick:s[0]||(s[0]=(...e)=>r.payAmount&&r.payAmount(...e))}),n.isLoading?((0,i.wg)(),(0,i.j4)(u,{key:0,variant:"primary"})):(0,i.kq)("",!0),(0,i.Wm)(d,{show:n.isSuccess,fade:"",variant:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("successMessagePayRemainingAmount")),1)])),_:1},8,["show"]),(0,i.Wm)(d,{show:n.isError,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("errorMessagePayRemainingAmount")),1)])),_:1},8,["show"])],512)),[[o.F8,r.show]])}var Y={name:"PayRemainigAmount",props:{booking:{default:function(){return{}}}},data(){return{isLoading:!1,isSuccess:!1,isError:!1}},computed:{deposit(){return this.booking.deposit},paid_remained(){return this.booking.paid_remained},show(){return this.deposit>0&&!this.paid_remained},id(){return this.booking.id}},methods:{payAmount(){this.isLoading=!0,this.axios.get("bookings/"+this.id+"/pay-remaining-amount").then((e=>{e.data.success&&(this.isSuccess=!0),e.data.error&&(this.isError=!0),setTimeout((()=>{this.isSuccess=!1,this.isError=!1}),3e3)})).finally((()=>{this.isLoading=!1}))}}},P=t(89);const E=(0,P.Z)(Y,[["render",V],["__scopeId","data-v-476753b0"]]);var H=E,F={name:"BookingItem",props:{booking:{default:function(){return{}}}},data:function(){return{isDelete:!1}},components:{PayRemainingAmount:H},computed:{customer(){return this.booking.customer_first_name+" "+this.booking.customer_last_name},status(){return this.$root.statusesList[this.booking.status].label},statusColor(){return this.$root.statusesList[this.booking.status].color},date(){return this.dateFormat(this.booking.date)},fromTime(){const e="default"===this.timeFormat?"HH:mm":"h:mma";return this.moment(this.booking.time,"HH:mm").format(e)},toTime(){const e="default"===this.timeFormat?"HH:mm":"h:mma";return this.booking.services.length>0?this.moment(this.booking.services[this.booking.services.length-1].end_at,"HH:mm").format(e):this.moment(this.booking.time,"HH:mm").format(e)},totalSum(){return this.booking.amount+" "+this.booking.currency},id(){return this.booking.id},assistants(){return this.booking.services.map((e=>({id:e.assistant_id,name:e.assistant_name}))).filter((e=>+e.id))},timeFormat(){return this.$root.settings.time_format.type??"default"}},methods:{deleteItem(){this.$emit("deleteItem"),this.isDelete=!1},showDetails(){this.$emit("showDetails")}},emits:["deleteItem","showDetails"]};const M=(0,P.Z)(F,[["render",T],["__scopeId","data-v-4847ffae"]]);var U=M,B={name:"UpcomingReservations",props:{shop:{default:function(){return{}}}},data:function(){return{hours:[{label:this.getLabel("label8Hours"),hours:8},{label:this.getLabel("label24Hours"),hours:24},{label:this.getLabel("label3Days"),hours:72},{label:this.getLabel("label1Week"),hours:168}],hourValue:8,bookingsList:[],isLoading:!1,filterAttendant:"",search:"",timeout:null}},mounted(){this.load(),setInterval((()=>this.update()),6e4)},components:{BookingItem:U},watch:{hourValue(e){e&&this.load()},search(e){e?(this.hourValue="",this.loadSearch()):this.hourValue=8},shop(){this.load()}},computed:{attendants(){var e={};return e[0]={id:"",name:this.getLabel("allTitle")},this.bookingsList.forEach((s=>{s.services.forEach((s=>{s.assistant_id>0&&(e[s.assistant_id]={id:s.assistant_id,name:s.assistant_name})}))})),Object.values(e).length>1?Object.values(e):[]},filteredBookingsList(){return this.bookingsList.filter((e=>{var s=!1;return e.services.forEach((e=>{this.filterAttendant===e.assistant_id&&(s=!0)})),""===this.filterAttendant||s}))}},methods:{deleteItem(e){this.axios.delete("bookings/"+e).then((()=>{this.bookingsList=this.bookingsList.filter((s=>s.id!==e))}))},showDetails(e){this.$emit("showItem",e)},load(){this.isLoading=!0,this.bookingsList=[],this.axios.get("bookings/upcoming",{params:{hours:this.hourValue,shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items})).finally((()=>{this.isLoading=!1}))},loadSearch(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.isLoading=!0,this.bookingsList=[],this.axios.get("bookings",{params:{search:this.search,per_page:-1,order_by:"date_time",order:"asc",start_date:this.moment().format("YYYY-MM-DD"),shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items})).finally((()=>{this.isLoading=!1}))}),1e3)},update(){this.axios.get("bookings/upcoming",{params:{hours:this.hourValue,shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items}))}},emits:["showItem"]};const q=(0,P.Z)(B,[["render",f],["__scopeId","data-v-645af42f"]]);var $=q;const N=e=>((0,i.dD)("data-v-f987ba6a"),e=e(),(0,i.Cn)(),e),O={class:"booking-details-customer-info"},R={class:"date"},Z=N((()=>(0,i._)("br",null,null,-1))),K={class:"time"},Q=N((()=>(0,i._)("br",null,null,-1))),G={class:"customer-firstname"},J=["src"],X={class:"customer-lastname"},ee={class:"customer-email"},se={class:"customer-phone"},te={key:0,class:"customer-phone-actions"},oe=["href"],ie=["href"],ae=["href"],le={class:"customer-note"},ne={class:"booking-details-extra-info"},re={class:"booking-details-extra-info-header"},ue={class:"booking-details-extra-info-header-title"},de=["aria-expanded"],me=N((()=>(0,i._)("br",null,null,-1))),ce=N((()=>(0,i._)("br",null,null,-1))),he={class:"booking-details-total-info"},pe={class:"service"},fe=["innerHTML"],ge={class:"resource"},we={class:"attendant"},ve={class:"total"},be=["innerHTML"],_e={class:"transaction-id"},ke={class:"discount"},ye={class:"deposit"},Le={class:"due"},Ce={class:"booking-details-status-info"};function Se(e,s,t,a,n,r){const u=(0,i.up)("b-col"),d=(0,i.up)("font-awesome-icon"),m=(0,i.up)("b-row"),c=(0,i.up)("b-collapse"),h=(0,i.up)("b-button"),p=(0,i.up)("PayRemainingAmount");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",null,(0,l.zw)(this.getLabel("bookingDetailsTitle")),1),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",O,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"10"}),(0,i.Wm)(u,{sm:"2",class:"actions"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-circle-xmark",onClick:r.close},null,8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",R,[(0,i._)("span",null,(0,l.zw)(this.getLabel("dateTitle")),1),Z,(0,i.Wm)(d,{icon:"fa-solid fa-calendar-days"}),(0,i.Uk)(" "+(0,l.zw)(r.date),1)])])),_:1}),(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",K,[(0,i._)("span",null,(0,l.zw)(this.getLabel("timeTitle")),1),Q,(0,i.Wm)(d,{icon:"fa-regular fa-clock"}),(0,i.Uk)(" "+(0,l.zw)(r.time),1)])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",G,[(0,i.Uk)((0,l.zw)(r.customerFirstname)+" ",1),(0,i._)("div",{class:"images",onClick:s[0]||(s[0]=(0,o.iM)(((...e)=>r.showCustomerImages&&r.showCustomerImages(...e)),["prevent"]))},[r.photos.length>0?((0,i.wg)(),(0,i.iD)("img",{key:0,src:r.photos.length?r.photos[0]["url"]:"",class:"photo"},null,8,J)):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"fa-solid fa-images"}))])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",X,(0,l.zw)(r.customerLastname),1)])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",ee,(0,l.zw)(r.customerEmail),1)])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",se,[(0,i.Uk)((0,l.zw)(r.customerPhone)+" ",1),r.customerPhone?((0,i.wg)(),(0,i.iD)("span",te,[(0,i._)("a",{href:"tel:"+r.customerPhone,class:"phone"},[(0,i.Wm)(d,{icon:"fa-solid fa-phone"})],8,oe),(0,i._)("a",{href:"sms:"+r.customerPhone,class:"sms"},[(0,i.Wm)(d,{icon:"fa-solid fa-message"})],8,ie),(0,i._)("a",{href:"https://wa.me/"+r.customerPhone,class:"whatsapp"},[(0,i.Wm)(d,{icon:"fa-brands fa-whatsapp"})],8,ae)])):(0,i.kq)("",!0)])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",le,(0,l.zw)(r.customerNote),1)])),_:1})])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",ne,[(0,i._)("div",re,[(0,i._)("div",ue,(0,l.zw)(this.getLabel("extraInfoLabel")),1),(0,i._)("div",null,[(0,i._)("span",{class:(0,l.C_)(["booking-details-extra-info-header-btn",e.visibleExtraInfo?null:"collapsed"]),"aria-expanded":e.visibleExtraInfo?"true":"false","aria-controls":"collapse-2",onClick:s[1]||(s[1]=s=>e.visibleExtraInfo=!e.visibleExtraInfo)},[e.visibleExtraInfo?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"fa-solid fa-circle-chevron-up"})):((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"fa-solid fa-circle-chevron-down"}))],10,de)])]),(0,i.Wm)(c,{id:"collapse-2",class:"booking-details-extra-info-fields",modelValue:e.visibleExtraInfo,"onUpdate:modelValue":s[2]||(s[2]=s=>e.visibleExtraInfo=s)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.customFieldsList,(e=>((0,i.wg)(),(0,i.j4)(m,{key:e.key,class:"booking-details-extra-info-field-row"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.label)+":",1),me,(0,i._)("strong",null,(0,l.zw)(e.value),1)])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(m,{class:"booking-details-extra-info-field-row"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("customerPersonalNotesLabel"))+":",1),ce,(0,i._)("strong",null,(0,l.zw)(r.customerPersonalNote),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",he,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.services,((e,s)=>((0,i.wg)(),(0,i.j4)(m,{key:s},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",pe,[(0,i._)("strong",null,[(0,i.Uk)((0,l.zw)(e.service_name)+" [",1),(0,i._)("span",{innerHTML:e.service_price+t.booking.currency},null,8,fe),(0,i.Uk)("]")])])])),_:2},1024),(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",ge,(0,l.zw)(e.resource_name),1)])),_:2},1024),(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",we,(0,l.zw)(e.assistant_name),1)])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",ve,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("strong",null,(0,l.zw)(this.getLabel("totalTitle")),1)])),_:1}),(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("strong",null,[(0,i._)("span",{innerHTML:r.totalSum},null,8,be)])])),_:1})])),_:1})])])),_:1}),(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",_e,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("transactionIdTitle")),1)])),_:1}),(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(r.transactionId.join(", ")),1)])),_:1})])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",ke,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("discountTitle")),1)])),_:1}),(0,i.Wm)(u,{sm:"6",innerHTML:r.discount},null,8,["innerHTML"])])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",ye,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("depositTitle")),1)])),_:1}),(0,i.Wm)(u,{sm:"6",innerHTML:r.deposit},null,8,["innerHTML"])])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"4"},{default:(0,i.w5)((()=>[(0,i._)("div",Le,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("dueTitle")),1)])),_:1}),(0,i.Wm)(u,{sm:"6",innerHTML:r.due},null,8,["innerHTML"])])),_:1})])])),_:1})])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ce,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6",class:"status"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(r.status),1)])),_:1}),(0,i.Wm)(u,{sm:"6",class:"booking-details-actions"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{variant:"primary",onClick:r.edit},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-pen-to-square"}),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("editButtonLabel")),1)])),_:1},8,["onClick"]),(0,i.Wm)(p,{booking:t.booking},null,8,["booking"])])),_:1})])),_:1})])])),_:1})])),_:1})],512)),[[o.F8,e.show]])}var We={name:"BookingDetails",props:{booking:{default:function(){return{}}}},computed:{date(){return this.dateFormat(this.bookingData.date)},time(){return this.timeFormat(this.bookingData.time)},customerFirstname(){return this.bookingData.customer_first_name},customerLastname(){return this.bookingData.customer_last_name},customerEmail(){return this.bookingData.customer_email},customerPhone(){return this.bookingData.customer_phone?this.bookingData.customer_phone_country_code+this.bookingData.customer_phone:""},customerNote(){return this.bookingData.note},customerPersonalNote(){return this.bookingData.customer_personal_note},services(){return this.bookingData.services},totalSum(){return this.bookingData.amount+this.bookingData.currency},transactionId(){return this.bookingData.transaction_id},discount(){return this.bookingData.discounts_details.length>0?this.bookingData.discounts_details.map((e=>e.name+" ("+e.amount_string+")")).join(", "):"-"},deposit(){return+this.bookingData.deposit>0?this.bookingData.deposit+this.bookingData.currency:"-"},due(){return+this.bookingData.amount-+this.bookingData.deposit+this.bookingData.currency},status(){return this.$root.statusesList[this.booking.status].label},customFieldsList(){return this.bookingData.custom_fields.filter((e=>-1===["html","file"].indexOf(e.type)))},photos(){return this.bookingData.customer_photos}},mounted(){this.toggleShow(),setInterval((()=>this.update()),6e4)},components:{PayRemainingAmount:H},data:function(){return{show:!0,visibleExtraInfo:!1,bookingData:this.booking}},methods:{close(){this.$emit("close")},edit(){this.$emit("edit")},toggleShow(){this.show=!1,setTimeout((()=>{this.show=!0}),0)},update(){this.axios.get("bookings/"+this.bookingData.id).then((e=>{this.bookingData=e.data.items[0]}))},showCustomerImages(){this.$emit("showCustomerImages",{id:this.bookingData.customer_id,photos:this.photos})}},emits:["close","edit","showCustomerImages"]};const De=(0,P.Z)(We,[["render",Se],["__scopeId","data-v-f987ba6a"]]);var Ie=De;function je(e,s,t,a,n,r){const u=(0,i.up)("EditBooking");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",null,(0,l.zw)(this.getLabel("editReservationTitle")),1),(0,i.Wm)(u,{bookingID:t.booking.id,date:t.booking.date,time:t.booking.time,customerID:t.customer?t.customer.id:t.booking.customer_id,customerFirstname:t.customer?t.customer.first_name:t.booking.customer_first_name,customerLastname:t.customer?t.customer.last_name:t.booking.customer_last_name,customerEmail:t.customer?t.customer.email:t.booking.customer_email,customerPhone:t.customer?t.customer.phone:t.booking.customer_phone,customerAddress:t.customer?t.customer.address:t.booking.customer_address,customerNotes:t.booking.note,customerPersonalNotes:t.customer?t.customer.note:t.booking.customer_personal_note,services:t.booking.services,discounts:t.booking.discounts,status:t.booking.status,isLoading:e.isLoading,isSaved:e.isSaved,isError:e.isError,errorMessage:e.errorMessage,customFields:t.booking.custom_fields,shop:t.booking.shop,onClose:r.close,onChooseCustomer:r.chooseCustomer,onSave:r.save},null,8,["bookingID","date","time","customerID","customerFirstname","customerLastname","customerEmail","customerPhone","customerAddress","customerNotes","customerPersonalNotes","services","discounts","status","isLoading","isSaved","isError","errorMessage","customFields","shop","onClose","onChooseCustomer","onSave"])],512)),[[o.F8,e.show]])}const Ae=e=>((0,i.dD)("data-v-13e7610e"),e=e(),(0,i.Cn)(),e),Te={class:"booking-details-customer-info"},xe={class:"date"},ze={class:"time"},Ve=["onClick"],Ye={class:"select-existing-client"},Pe={class:"customer-firstname"},Ee={class:"customer-lastname"},He={class:"customer-email"},Fe={class:"customer-address"},Me={class:"customer-phone"},Ue={class:"customer-notes"},Be={class:"save-as-new-customer"},qe={class:"booking-details-extra-info"},$e={class:"booking-details-extra-info-header"},Ne={class:"booking-details-extra-info-header-title"},Oe=["aria-expanded"],Re={class:"customer-personal-notes"},Ze={class:"label",for:"customer_personal_notes"},Ke={class:"booking-details-total-info"},Qe={class:"service"},Ge={key:0,class:"option-item option-item-selected"},Je={class:"name"},Xe={key:0},es={class:"service-name"},ss={class:"info"},ts={class:"price"},os=["innerHTML"],is=Ae((()=>(0,i._)("span",null," | ",-1))),as={class:"option-item"},ls={class:"availability-wrapper"},ns={class:"name"},rs={key:0},us={class:"service-name"},ds={class:"info"},ms={class:"price"},cs=["innerHTML"],hs=Ae((()=>(0,i._)("span",null," | ",-1))),ps={class:"vue-select-search"},fs={class:"resource"},gs={key:0,class:"option-item option-item-selected"},ws={class:"name"},vs={class:"option-item"},bs={class:"availability-wrapper"},_s={class:"name"},ks={class:"vue-select-search"},ys={class:"attendant"},Ls={key:0,class:"option-item option-item-selected"},Cs={class:"name"},Ss={class:"option-item"},Ws={class:"availability-wrapper"},Ds={class:"name"},Is={key:0},js=Ae((()=>(0,i._)("span",null," [",-1))),As=["innerHTML"],Ts=Ae((()=>(0,i._)("span",null,"]",-1))),xs={class:"vue-select-search"},zs={class:"add-service"},Vs={class:"add-service-required"},Ys={key:0,class:"booking-discount-info"},Ps={class:"discount"},Es={key:0,class:"discount-name"},Hs={class:"option-item"},Fs={class:"discount-name"},Ms={class:"info"},Us={class:"vue-select-search"},Bs={class:"add-discount"},qs={class:"booking-details-status-info"};function $s(e,s,t,a,n,r){const u=(0,i.up)("b-col"),d=(0,i.up)("font-awesome-icon"),m=(0,i.up)("b-row"),c=(0,i.up)("b-input-group-text"),h=(0,i.up)("Datepicker"),p=(0,i.up)("b-input-group"),f=(0,i.up)("b-form-input"),g=(0,i.up)("b-button"),w=(0,i.up)("vue-tel-input"),v=(0,i.up)("b-form-textarea"),b=(0,i.up)("b-form-checkbox"),_=(0,i.up)("CustomField"),k=(0,i.up)("b-collapse"),y=(0,i.up)("vue-select"),L=(0,i.up)("b-spinner"),C=(0,i.up)("b-alert"),S=(0,i.up)("b-form-select");return(0,i.wg)(),(0,i.iD)("div",{onClick:s[19]||(s[19]=s=>e.showTimeslots=!1)},[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Te,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"10"}),(0,i.Wm)(u,{sm:"2",class:"actions"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-circle-xmark",onClick:r.close},null,8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",xe,[(0,i._)("span",null,(0,l.zw)(this.getLabel("dateTitle")),1),(0,i.Wm)(p,null,{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-calendar-days"})])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(h,{format:"yyyy-MM-dd",modelValue:e.elDate,"onUpdate:modelValue":s[0]||(s[0]=s=>e.elDate=s),"auto-apply":!0,"text-input":!0,"hide-input-icon":!0,clearable:!1,class:(0,l.C_)({required:e.requiredFields.indexOf("date")>-1})},null,8,["modelValue","class"])])),_:1})])])),_:1}),(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i._)("div",ze,[(0,i._)("span",null,(0,l.zw)(this.getLabel("timeTitle")),1),(0,i.Wm)(p,null,{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-regular fa-clock"})])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(f,{modelValue:e.elTime,"onUpdate:modelValue":s[1]||(s[1]=s=>e.elTime=s),onClick:s[2]||(s[2]=(0,o.iM)((s=>e.showTimeslots=!e.showTimeslots),["stop"])),class:(0,l.C_)(["timeslot-input",{required:e.requiredFields.indexOf("time")>-1}])},null,8,["modelValue","class"]),(0,i._)("div",{class:(0,l.C_)(["timeslots",{hide:!this.showTimeslots}]),onClick:s[3]||(s[3]=(0,o.iM)((()=>{}),["stop"]))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.timeslots,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e,class:(0,l.C_)(["timeslot",{free:r.freeTimeslots.indexOf(this.moment(e,this.getTimeFormat()).format("HH:mm"))>-1}]),onClick:s=>r.setTime(e)},(0,l.zw)(e),11,Ve)))),128))],2)])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ye,[(0,i.Wm)(g,{variant:"primary",onClick:r.chooseCustomer},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-users"}),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("selectExistingClientButtonLabel")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Pe,[(0,i.Wm)(f,{placeholder:this.getLabel("customerFirstnamePlaceholder"),modelValue:e.elCustomerFirstname,"onUpdate:modelValue":s[4]||(s[4]=s=>e.elCustomerFirstname=s),class:(0,l.C_)({required:e.requiredFields.indexOf("customer_first_name")>-1})},null,8,["placeholder","modelValue","class"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ee,[(0,i.Wm)(f,{placeholder:this.getLabel("customerLastnamePlaceholder"),modelValue:e.elCustomerLastname,"onUpdate:modelValue":s[5]||(s[5]=s=>e.elCustomerLastname=s)},null,8,["placeholder","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",He,[(0,i.Wm)(f,{placeholder:this.getLabel("customerEmailPlaceholder"),modelValue:e.elCustomerEmail,"onUpdate:modelValue":s[6]||(s[6]=s=>e.elCustomerEmail=s),onBlur:r.loadDiscounts},null,8,["placeholder","modelValue","onBlur"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Fe,[(0,i.Wm)(f,{placeholder:this.getLabel("customerAddressPlaceholder"),modelValue:e.elCustomerAddress,"onUpdate:modelValue":s[7]||(s[7]=s=>e.elCustomerAddress=s)},null,8,["placeholder","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Me,[(0,i.Wm)(w,{inputOptions:e.vueTelInputOptions,modelValue:e.elCustomerPhone,"onUpdate:modelValue":s[8]||(s[8]=s=>e.elCustomerPhone=s)},null,8,["inputOptions","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ue,[(0,i.Wm)(v,{modelValue:e.elCustomerNotes,"onUpdate:modelValue":s[9]||(s[9]=s=>e.elCustomerNotes=s),placeholder:this.getLabel("customerNotesPlaceholder"),rows:"3","max-rows":"6"},null,8,["modelValue","placeholder"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i._)("div",Be,[(0,i.Wm)(b,{modelValue:e.saveAsNewCustomer,"onUpdate:modelValue":s[10]||(s[10]=s=>e.saveAsNewCustomer=s),switch:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("saveAsNewCustomerLabel")),1)])),_:1},8,["modelValue"])])])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",qe,[(0,i._)("div",$e,[(0,i._)("div",Ne,(0,l.zw)(this.getLabel("extraInfoLabel")),1),(0,i._)("div",null,[(0,i._)("span",{class:(0,l.C_)(["booking-details-extra-info-header-btn",e.visibleExtraInfo?null:"collapsed"]),"aria-expanded":e.visibleExtraInfo?"true":"false","aria-controls":"collapse-2",onClick:s[11]||(s[11]=s=>e.visibleExtraInfo=!e.visibleExtraInfo)},[e.visibleExtraInfo?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"fa-solid fa-circle-chevron-up"})):((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"fa-solid fa-circle-chevron-down"}))],10,Oe)])]),(0,i.Wm)(k,{id:"collapse-2",class:"mt-2",modelValue:e.visibleExtraInfo,"onUpdate:modelValue":s[13]||(s[13]=s=>e.visibleExtraInfo=s)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.customFieldsList,(e=>((0,i.wg)(),(0,i.j4)(_,{key:e.key,field:e,value:r.getCustomFieldValue(e.key,e.default_value),onUpdate:r.updateCustomField},null,8,["field","value","onUpdate"])))),128)),(0,i.Wm)(m,{class:"field"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Re,[(0,i._)("label",Ze,(0,l.zw)(this.getLabel("customerPersonalNotesLabel")),1),(0,i.Wm)(v,{modelValue:e.elCustomerPersonalNotes,"onUpdate:modelValue":s[12]||(s[12]=s=>e.elCustomerPersonalNotes=s),modelModifiers:{lazy:!0},id:"customer_personal_notes",placeholder:this.getLabel("customerPersonalNotesPlaceholder"),rows:"3","max-rows":"6"},null,8,["modelValue","placeholder"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ke,[e.isLoadingServicesAssistants?(0,i.kq)("",!0):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.elServices,((t,a)=>((0,i.wg)(),(0,i.j4)(m,{key:a,class:"service-row"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:""},{default:(0,i.w5)((()=>[(0,i._)("div",Qe,[(0,i.Wm)(y,{ref_for:!0,ref:"select-service",class:(0,l.C_)(["service-select",{required:e.requiredFields.indexOf("services_service_"+a)>-1}]),"close-on-select":"",modelValue:t.service_id,"onUpdate:modelValue":e=>t.service_id=e,options:r.getServicesListBySearch(r.servicesList,e.serviceSearch[a]),"label-by":"[serviceName, price, duration, category]","value-by":"value"},{label:(0,i.w5)((({selected:e})=>[e?((0,i.wg)(),(0,i.iD)("div",Ge,[(0,i._)("div",Je,[(0,i._)("span",null,(0,l.zw)(e.category),1),e.category?((0,i.wg)(),(0,i.iD)("span",Xe," | ")):(0,i.kq)("",!0),(0,i._)("span",es,(0,l.zw)(e.serviceName),1)]),(0,i._)("div",ss,[(0,i._)("div",ts,[(0,i._)("span",null,(0,l.zw)(e.price),1),(0,i._)("span",{innerHTML:e.currency},null,8,os),is,(0,i._)("span",null,(0,l.zw)(e.duration),1)])])])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,l.zw)(this.getLabel("selectServicesPlaceholder")),1)],64))])),"dropdown-item":(0,i.w5)((({option:e})=>[(0,i._)("div",as,[(0,i._)("div",ls,[(0,i._)("div",{class:(0,l.C_)(["availability",{available:e.available}])},null,2),(0,i._)("div",ns,[(0,i._)("span",null,(0,l.zw)(e.category),1),e.category?((0,i.wg)(),(0,i.iD)("span",rs," | ")):(0,i.kq)("",!0),(0,i._)("span",us,(0,l.zw)(e.serviceName),1)])]),(0,i._)("div",ds,[(0,i._)("div",ms,[(0,i._)("span",null,(0,l.zw)(e.price),1),(0,i._)("span",{innerHTML:e.currency},null,8,cs),hs,(0,i._)("span",null,(0,l.zw)(e.duration),1)])])])])),_:2},1032,["modelValue","onUpdate:modelValue","options","class"]),(0,i._)("li",ps,[(0,i.Wm)(d,{icon:"fa-solid fa-magnifying-glass",class:"vue-select-search-icon"}),(0,i.Wm)(f,{modelValue:e.serviceSearch[a],"onUpdate:modelValue":s=>e.serviceSearch[a]=s,class:"vue-select-search-input",placeholder:this.getLabel("selectServicesSearchPlaceholder"),onMousedown:s[14]||(s[14]=(0,o.iM)((()=>{}),["stop"]))},null,8,["modelValue","onUpdate:modelValue","placeholder"])])])])),_:2},1024),r.isShowResource(t)?((0,i.wg)(),(0,i.j4)(u,{key:0,sm:""},{default:(0,i.w5)((()=>[(0,i._)("div",fs,[(0,i.Wm)(y,{ref_for:!0,ref:"select-resource",class:(0,l.C_)(["service-select",{required:e.requiredFields.indexOf("services_assistant_"+a)>-1}]),"close-on-select":"",modelValue:t.resource_id,"onUpdate:modelValue":e=>t.resource_id=e,options:r.getAttendantsOrResourcesListBySearch(r.resourcesList,e.resourceSearch[a]),"label-by":"text","value-by":"value",onFocus:e=>r.loadAvailabilityResources(t.service_id)},{label:(0,i.w5)((({selected:e})=>[e?((0,i.wg)(),(0,i.iD)("div",gs,[(0,i._)("div",ws,[(0,i._)("span",null,(0,l.zw)(e.text),1)])])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,l.zw)(this.getLabel("selectResourcesPlaceholder")),1)],64))])),"dropdown-item":(0,i.w5)((({option:e})=>[(0,i._)("div",vs,[(0,i._)("div",bs,[(0,i._)("div",{class:(0,l.C_)(["availability",{available:e.available}])},null,2),(0,i._)("div",_s,(0,l.zw)(e.text),1)])])])),_:2},1032,["modelValue","onUpdate:modelValue","options","class","onFocus"]),(0,i._)("li",ks,[(0,i.Wm)(d,{icon:"fa-solid fa-magnifying-glass",class:"vue-select-search-icon"}),(0,i.Wm)(f,{modelValue:e.resourceSearch[a],"onUpdate:modelValue":s=>e.resourceSearch[a]=s,class:"vue-select-search-input",placeholder:this.getLabel("selectResourcesSearchPlaceholder"),onMousedown:s[15]||(s[15]=(0,o.iM)((()=>{}),["stop"]))},null,8,["modelValue","onUpdate:modelValue","placeholder"])])])])),_:2},1024)):(0,i.kq)("",!0),r.isShowAttendant(t)?((0,i.wg)(),(0,i.j4)(u,{key:1,sm:""},{default:(0,i.w5)((()=>[(0,i._)("div",ys,[(0,i.Wm)(y,{ref_for:!0,ref:"select-assistant",class:(0,l.C_)(["service-select",{required:e.requiredFields.indexOf("services_assistant_"+a)>-1}]),"close-on-select":"",modelValue:t.assistant_id,"onUpdate:modelValue":e=>t.assistant_id=e,options:r.getAttendantsOrResourcesListBySearch(r.attendantsList,e.assistantSearch[a]),"label-by":"text","value-by":"value",onFocus:e=>r.loadAvailabilityAttendants(t.service_id)},{label:(0,i.w5)((({selected:e})=>[e?((0,i.wg)(),(0,i.iD)("div",Ls,[(0,i._)("div",Cs,[(0,i._)("span",null,(0,l.zw)(e.text),1)])])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,l.zw)(this.getLabel("selectAttendantsPlaceholder")),1)],64))])),"dropdown-item":(0,i.w5)((({option:e})=>[(0,i._)("div",Ss,[(0,i._)("div",Ws,[(0,i._)("div",{class:(0,l.C_)(["availability",{available:e.available}])},null,2),(0,i._)("div",Ds,[(0,i._)("span",null,(0,l.zw)(e.text),1),e.variable_price?((0,i.wg)(),(0,i.iD)("span",Is,[js,(0,i._)("span",null,(0,l.zw)(e.variable_price),1),(0,i._)("span",{innerHTML:e.currency},null,8,As),Ts])):(0,i.kq)("",!0)])])])])),_:2},1032,["modelValue","onUpdate:modelValue","options","class","onFocus"]),(0,i._)("li",xs,[(0,i.Wm)(d,{icon:"fa-solid fa-magnifying-glass",class:"vue-select-search-icon"}),(0,i.Wm)(f,{modelValue:e.assistantSearch[a],"onUpdate:modelValue":s=>e.assistantSearch[a]=s,class:"vue-select-search-input",placeholder:this.getLabel("selectAssistantsSearchPlaceholder"),onMousedown:s[16]||(s[16]=(0,o.iM)((()=>{}),["stop"]))},null,8,["modelValue","onUpdate:modelValue","placeholder"])])])])),_:2},1024)):(0,i.kq)("",!0),(0,i.Wm)(u,{sm:"1",class:"service-row-delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-circle-xmark",onClick:e=>r.deleteService(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6",class:"add-service-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("div",zs,[(0,i.Wm)(g,{variant:"primary",onClick:r.addService,disabled:e.isLoadingServicesAssistants},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-plus"}),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("addServiceButtonLabel")),1)])),_:1},8,["onClick","disabled"]),e.isLoadingServicesAssistants?((0,i.wg)(),(0,i.j4)(L,{key:0,variant:"primary",class:"selects-loader"})):(0,i.kq)("",!0)]),(0,i._)("div",Vs,[(0,i.Wm)(C,{show:e.requiredFields.indexOf("services")>-1,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("addServiceMessage")),1)])),_:1},8,["show"])])])),_:1})])),_:1})])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[r.showDiscount?((0,i.wg)(),(0,i.iD)("div",Ys,[e.isLoadingDiscounts?(0,i.kq)("",!0):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.elDiscounts,((t,a)=>((0,i.wg)(),(0,i.j4)(m,{key:a,class:"discount-row"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"5"},{default:(0,i.w5)((()=>[(0,i._)("div",Ps,[(0,i.Wm)(y,{ref_for:!0,ref:"select-discount",class:"discount-select","close-on-select":"",modelValue:e.elDiscounts[a],"onUpdate:modelValue":s=>e.elDiscounts[a]=s,options:r.getDiscountsListBySearch(r.discountsList,e.discountSearch[a]),"label-by":"text","value-by":"value"},{label:(0,i.w5)((({selected:e})=>[e?((0,i.wg)(),(0,i.iD)("span",Es,(0,l.zw)(e.text),1)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,l.zw)(this.getLabel("selectDiscountLabel")),1)],64))])),"dropdown-item":(0,i.w5)((({option:e})=>[(0,i._)("div",Hs,[(0,i._)("span",Fs,(0,l.zw)(e.text),1),(0,i._)("div",Ms,[(0,i._)("span",null,"expires: "+(0,l.zw)(e.expires),1)])])])),_:2},1032,["modelValue","onUpdate:modelValue","options"]),(0,i._)("li",Us,[(0,i.Wm)(d,{icon:"fa-solid fa-magnifying-glass",class:"vue-select-search-icon"}),(0,i.Wm)(f,{modelValue:e.discountSearch[a],"onUpdate:modelValue":s=>e.discountSearch[a]=s,class:"vue-select-search-input",placeholder:this.getLabel("selectDiscountsSearchPlaceholder"),onMousedown:s[17]||(s[17]=(0,o.iM)((()=>{}),["stop"]))},null,8,["modelValue","onUpdate:modelValue","placeholder"])])])])),_:2},1024),(0,i.Wm)(u,{sm:"2",class:"discount-row-delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-circle-xmark",onClick:e=>r.deleteDiscount(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6",class:"add-discount-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("div",Bs,[(0,i.Wm)(g,{variant:"primary",onClick:r.addDiscount,disabled:e.isLoadingDiscounts},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-plus"}),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("addDiscountButtonLabel")),1)])),_:1},8,["onClick","disabled"]),e.isLoadingDiscounts?((0,i.wg)(),(0,i.j4)(L,{key:0,variant:"primary",class:"selects-loader"})):(0,i.kq)("",!0)])])),_:1})])),_:1})])):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",qs,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6",class:"status"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:e.elStatus,"onUpdate:modelValue":s[18]||(s[18]=s=>e.elStatus=s),options:r.statusesList},null,8,["modelValue","options"])])),_:1}),(0,i.Wm)(u,{sm:"6"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"6",class:"save-button-wrapper"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{variant:"primary",onClick:r.save},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-check"}),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("saveButtonLabel")),1)])),_:1},8,["onClick"])])),_:1}),(0,i.Wm)(u,{sm:"6",class:"save-button-result-wrapper"},{default:(0,i.w5)((()=>[t.isLoading?((0,i.wg)(),(0,i.j4)(L,{key:0,variant:"primary"})):(0,i.kq)("",!0),(0,i.Wm)(C,{show:t.isSaved,fade:"",variant:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("savedLabel")),1)])),_:1},8,["show"]),(0,i.Wm)(C,{show:t.isError,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.errorMessage),1)])),_:1},8,["show"]),(0,i.Wm)(C,{show:!e.isValid,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("validationMessage")),1)])),_:1},8,["show"])])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1})])}const Ns=["for"],Os=["for"],Rs=["for"];function Zs(e,s,t,o,a,n){const r=(0,i.up)("b-form-input"),u=(0,i.up)("b-form-textarea"),d=(0,i.up)("b-form-checkbox"),m=(0,i.up)("b-form-select"),c=(0,i.up)("b-col"),h=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(h,{class:"field"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{sm:"12"},{default:(0,i.w5)((()=>["text"===n.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(r,{modelValue:e.elValue,"onUpdate:modelValue":s[0]||(s[0]=s=>e.elValue=s),modelModifiers:{lazy:!0},id:n.key},null,8,["modelValue","id"]),(0,i._)("label",{class:"label",for:n.key},(0,l.zw)(n.label),9,Ns)],64)):(0,i.kq)("",!0),"textarea"===n.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(u,{modelValue:e.elValue,"onUpdate:modelValue":s[1]||(s[1]=s=>e.elValue=s),modelModifiers:{lazy:!0},id:n.key},null,8,["modelValue","id"]),(0,i._)("label",{class:"label",for:n.key},(0,l.zw)(n.label),9,Os)],64)):(0,i.kq)("",!0),"checkbox"===n.type?((0,i.wg)(),(0,i.j4)(d,{key:2,modelValue:e.elValue,"onUpdate:modelValue":s[2]||(s[2]=s=>e.elValue=s),id:n.key},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.label),1)])),_:1},8,["modelValue","id"])):(0,i.kq)("",!0),"select"===n.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:3},[(0,i.Wm)(m,{modelValue:e.elValue,"onUpdate:modelValue":s[3]||(s[3]=s=>e.elValue=s),id:n.key,options:n.options},null,8,["modelValue","id","options"]),(0,i._)("label",{class:"label",for:n.key},(0,l.zw)(n.label),9,Rs)],64)):(0,i.kq)("",!0)])),_:1})])),_:1})}var Ks={name:"CustomField",props:{field:{default:function(){return{}}},value:{default:function(){return""}}},mounted(){this.update()},data:function(){let e=this.value;return"checkbox"===this.field.type&&(e=!!e),{elValue:e}},watch:{elValue(){this.update()}},computed:{key(){return this.field.key},type(){return this.field.type},label(){return this.field.label},options(){return this.field.options.map((e=>({value:e.value,text:e.label})))}},methods:{update(){this.$emit("update",this.key,this.elValue)}},emits:["update"]};const Qs=(0,P.Z)(Ks,[["render",Zs],["__scopeId","data-v-19833334"]]);var Gs=Qs,Js={name:"EditBooking",props:{bookingID:{default:function(){return""}},date:{default:function(){return""}},time:{default:function(){return""}},customerID:{default:function(){return""}},customerFirstname:{default:function(){return""}},customerLastname:{default:function(){return""}},customerEmail:{default:function(){return""}},customerAddress:{default:function(){return""}},customerPhone:{default:function(){return""}},customerNotes:{default:function(){return""}},customerPersonalNotes:{default:function(){return""}},services:{default:function(){return[]}},discounts:{default:function(){return[]}},status:{default:function(){return""}},isLoading:{default:function(){return!1}},isSaved:{default:function(){return!1}},isError:{default:function(){return!1}},errorMessage:{default:function(){return""}},customFields:{default:function(){return[]}},shop:{default:function(){return{}}}},mounted(){this.loadDiscounts(),this.loadAvailabilityIntervals(),this.loadAvailabilityServices(),this.loadCustomFields(),this.isLoadingServicesAssistants=!0,Promise.all([this.loadServices(),this.loadAttendants(),this.loadResources(),this.loadServicesCategory()]).then((()=>{this.isLoadingServicesAssistants=!1,this.elServices.forEach(((e,s)=>{this.addServicesSelectSearchInput(s),this.addAssistantsSelectSearchInput(s),this.addResourcesSelectSearchInput(s)}))}))},data:function(){return{elDate:this.date,elTime:this.timeFormat(this.time),elCustomerFirstname:this.customerFirstname,elCustomerLastname:this.customerLastname,elCustomerEmail:this.customerEmail,elCustomerAddress:this.customerAddress,elCustomerPhone:this.customerPhone,elCustomerNotes:this.customerNotes,elCustomerPersonalNotes:this.customerPersonalNotes,elServices:[...this.services].map((e=>({service_id:e.service_id,assistant_id:e.assistant_id,resource_id:e.resource_id}))),elDiscounts:[...this.discounts],elStatus:this.status,visibleDiscountInfo:!1,elDiscountsList:[],elServicesList:[],elServicesNameList:[],elAttendantsList:[],elResourcesList:[],showTimeslots:!1,availabilityIntervals:{},saveAsNewCustomer:!1,availabilityServices:[],serviceSearch:[],discountSearch:[],isValid:!0,requiredFields:[],visibleExtraInfo:!1,customFieldsList:[],elCustomFields:this.customFields,isLoadingServicesAssistants:!1,isLoadingDiscounts:!1,assistantSearch:[],resourceSearch:[],availabilityAttendants:[],availabilityResources:[],vueTelInputOptions:{placeholder:this.getLabel("customerPhonePlaceholder")}}},watch:{elDate(){this.loadAvailabilityIntervals(),this.loadAvailabilityServices(),this.loadDiscounts()},elTime(){this.loadAvailabilityServices(),this.loadDiscounts()},bookingServices(){this.loadDiscounts()},shop(){this.loadAvailabilityIntervals(),this.loadAvailabilityServices(),this.isLoadingServicesAssistants=!0,Promise.all([this.loadServices(),this.loadAttendants(),this.loadResources()]).then((()=>{this.isLoadingServicesAssistants=!1,this.elServices.forEach(((e,s)=>{this.addServicesSelectSearchInput(s),this.addAssistantsSelectSearchInput(s),this.addResourcesSelectSearchInput(s)}))}))}},computed:{statusesList(){var e=[];for(var s in this.$root.statusesList)e.push({value:s,text:this.$root.statusesList[s].label});return e},discountsList(){var e=[];return this.elDiscountsList.forEach((s=>{e.push({value:s.id,text:s.name,expires:s.valid_to})})),e},servicesList(){var e=[];return this.elServicesList.forEach((s=>{let t=[];s.categories.forEach((e=>{let s=this.elServicesNameList.find((s=>s.id===e));s&&t.push(s.name)}));let o=!1,i=this.availabilityServices.find((e=>e.id===s.id));i&&(o=i.available);let a=s.price;this.shop&&s.shops&&s.shops.forEach((e=>{e.id!==this.shop.id||(a=e.price)})),e.push({value:s.id,price:a,duration:s.duration,currency:s.currency,serviceName:s.name,category:t.join(", "),empty_assistants:s.empty_assistants,empty_resources:s.empty_resources,available:o})})),e},attendantsList(){var e=[];return this.elAttendantsList.forEach((s=>{let t=!1,o=!1,i=this.availabilityAttendants.find((e=>e.id===s.id));i&&(t=i.available,o=i.variable_price),e.push({value:s.id,text:s.name,available:t,variable_price:o,currency:s.currency})})),e},resourcesList(){var e=[];return this.elResourcesList.forEach((s=>{let t=!1,o=this.availabilityResources.find((e=>e.id===s.id));o&&(t=1===o.status),e.push({value:s.id,text:s.name,available:t})})),e},timeslots(){var e=this.availabilityIntervals.workTimes?Object.values(this.availabilityIntervals.workTimes):[];return e.map((e=>this.timeFormat(e)))},freeTimeslots(){return this.availabilityIntervals.times?Object.values(this.availabilityIntervals.times):[]},showAttendant(){return"undefined"===typeof this.$root.settings.attendant_enabled||this.$root.settings.attendant_enabled},showResource(){return"undefined"===typeof this.$root.settings.resources_enabled||this.$root.settings.resources_enabled},showDiscount(){return"undefined"===typeof this.$root.settings.discounts_enabled||this.$root.settings.discounts_enabled},bookingServices(){return JSON.parse(JSON.stringify(this.elServices)).map((e=>(e.assistant_id?e.assistant_id:e.assistant_id=0,e.resource_id?e.resource_id:e.resource_id=0,e)))}},methods:{close(){this.$emit("close")},chooseCustomer(){this.$emit("chooseCustomer")},save(){if(this.isValid=this.validate(),this.isValid){var e={date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),status:this.elStatus,customer_id:this.customerID?this.customerID:0,customer_first_name:this.elCustomerFirstname,customer_last_name:this.elCustomerLastname,customer_email:this.elCustomerEmail,customer_phone:this.elCustomerPhone,customer_address:this.elCustomerAddress,services:this.bookingServices,discounts:this.elDiscounts,note:this.elCustomerNotes,customer_personal_note:this.elCustomerPersonalNotes,save_as_new_customer:this.saveAsNewCustomer,custom_fields:this.elCustomFields};this.shop&&(e["shop"]={id:this.shop.id}),this.$emit("save",e)}},loadDiscounts(){this.isLoadingDiscounts=!0,this.axios.get("discounts",{params:{return_active:!0,date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),customer_email:this.elCustomerEmail,services:this.bookingServices,shop:this.shop?this.shop.id:null}}).then((e=>{this.elDiscountsList=e.data.items,this.isLoadingDiscounts=!1,this.discountSearch=[],this.elDiscounts=this.elDiscounts.filter((e=>{const s=this.discountsList.map((e=>e.value));return s.includes(e)})),this.elDiscounts.forEach(((e,s)=>{this.addDiscountsSelectSearchInput(s)}))}))},loadServices(){return this.axios.get("services",{params:{per_page:-1,shop:this.shop?this.shop.id:null}}).then((e=>{this.elServicesList=e.data.items}))},loadServicesCategory(){return this.axios.get("services/categories").then((e=>{this.elServicesNameList=e.data.items}))},loadAttendants(){return this.axios.get("assistants",{params:{shop:this.shop?this.shop.id:null}}).then((e=>{this.elAttendantsList=e.data.items}))},loadResources(){return this.axios.get("resources",{params:{shop:this.shop?this.shop.id:null}}).then((e=>{this.elResourcesList=e.data.items})).catch((()=>{}))},loadAvailabilityIntervals(){this.axios.post("availability/intervals",{date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),shop:this.shop?this.shop.id:0}).then((e=>{this.availabilityIntervals=e.data.intervals}))},loadAvailabilityServices(){this.axios.post("availability/booking/services",{date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),booking_id:this.bookingID?this.bookingID:0,is_all_services:!0,services:this.bookingServices.filter((e=>e.service_id)),shop:this.shop?this.shop.id:0}).then((e=>{this.availabilityServices=e.data.services}))},loadAvailabilityAttendants(e){this.axios.post("availability/booking/assistants",{date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),booking_id:this.bookingID?this.bookingID:0,selected_service_id:e||0,services:this.bookingServices.filter((e=>e.service_id)),shop:this.shop?this.shop.id:0}).then((e=>{this.availabilityAttendants=e.data.assistants}))},loadAvailabilityResources(e){this.axios.post("availability/booking/resources",{date:this.moment(this.elDate).format("YYYY-MM-DD"),time:this.moment(this.elTime,this.getTimeFormat()).format("HH:mm"),booking_id:this.bookingID?this.bookingID:0,selected_service_id:e||0,services:this.bookingServices.filter((e=>e.service_id)),shop:this.shop?this.shop.id:0}).then((e=>{this.availabilityResources=e.data.resources}))},loadCustomFields(){this.axios.get("custom-fields/booking").then((e=>{this.customFieldsList=e.data.items.filter((e=>-1===["html","file"].indexOf(e.type)))}))},addDiscount(){this.elDiscounts.push(null),this.addDiscountsSelectSearchInput(this.elDiscounts.length-1)},deleteDiscount(e){this.elDiscounts.splice(e,1),this.discountSearch.splice(e,1)},addService(){this.elServices.push({service_id:null,assistant_id:null,resource_id:null}),this.addServicesSelectSearchInput(this.elServices.length-1),this.addAssistantsSelectSearchInput(this.elServices.length-1),this.addResourcesSelectSearchInput(this.elServices.length-1)},deleteService(e){this.elServices.splice(e,1),this.serviceSearch.splice(e,1)},setTime(e){this.elTime=e,this.showTimeslots=!1},getServicesListBySearch(e,s){return s?e.filter((e=>new RegExp(s,"ig").test([e.category,e.serviceName,e.price,e.duration].join("")))):e},getDiscountsListBySearch(e,s){return s?e.filter((e=>new RegExp(s,"ig").test(e.text))):e},validate(){return this.requiredFields=[],this.elDate||this.requiredFields.push("date"),this.elTime.trim()||this.requiredFields.push("time"),this.elCustomerFirstname.trim()||this.requiredFields.push("customer_first_name"),this.bookingServices.length||this.requiredFields.push("services"),this.bookingServices.forEach(((e,s)=>{e.service_id||this.requiredFields.push("services_service_"+s),this.isShowAttendant(e)&&!e.assistant_id&&this.requiredFields.push("services_assistant_"+s)})),0===this.requiredFields.length},isShowAttendant(e){let s=this.servicesList.find((s=>s.value===e.service_id));return s?this.showAttendant&&(!e.service_id||s&&!s.empty_assistants):this.showAttendant},isShowResource(e){let s=this.servicesList.find((s=>s.value===e.service_id));return s?this.showResource&&(!e.service_id||s&&!s.empty_resources):this.showResource},updateCustomField(e,s){let t=this.elCustomFields.find((s=>s.key===e));t?t.value=s:this.elCustomFields.push({key:e,value:s})},getCustomFieldValue(e,s){let t=this.elCustomFields.find((s=>s.key===e));return t?t.value:s},addServicesSelectSearchInput(e){this.serviceSearch.push(""),setTimeout((()=>{window.document.querySelectorAll(".service .vue-dropdown")[e].prepend(window.document.querySelectorAll(".service .vue-select-search")[e]);let s=this.$refs["select-service"][e],t=s.blur;s.blur=()=>{};let o=s.focus,i=window.document.querySelectorAll(".service .vue-select-search-input")[e];s.focus=()=>{o(),setTimeout((()=>{i.focus()}),0)},i.addEventListener("blur",(()=>{t(),this.serviceSearch[e]=""}))}),0)},addAssistantsSelectSearchInput(e){this.assistantSearch.push(""),setTimeout((()=>{window.document.querySelectorAll(".attendant .vue-dropdown")[e].prepend(window.document.querySelectorAll(".attendant .vue-select-search")[e]);let s=this.$refs["select-assistant"][e],t=s.blur;s.blur=()=>{};let o=s.focus,i=window.document.querySelectorAll(".attendant .vue-select-search-input")[e];s.focus=()=>{o(),setTimeout((()=>{i.focus()}),0)},i.addEventListener("blur",(()=>{t(),this.assistantSearch[e]=""}))}),0)},addResourcesSelectSearchInput(e){this.resourceSearch.push(""),setTimeout((()=>{window.document.querySelectorAll(".resource .vue-dropdown")[e].prepend(window.document.querySelectorAll(".resource .vue-select-search")[e]);let s=this.$refs["select-resource"][e],t=s.blur;s.blur=()=>{};let o=s.focus,i=window.document.querySelectorAll(".resource .vue-select-search-input")[e];s.focus=()=>{o(),setTimeout((()=>{i.focus()}),0)},i.addEventListener("blur",(()=>{t(),this.resourceSearch[e]=""}))}),0)},addDiscountsSelectSearchInput(e){this.discountSearch.push(""),setTimeout((()=>{window.document.querySelectorAll(".discount .vue-dropdown")[e].prepend(window.document.querySelectorAll(".discount .vue-select-search")[e]);let s=this.$refs["select-discount"][e],t=s.blur;s.blur=()=>{};let o=s.focus,i=window.document.querySelectorAll(".discount .vue-select-search-input")[e];s.focus=()=>{o(),setTimeout((()=>{i.focus()}),0)},i.addEventListener("blur",(()=>{t(),this.discountSearch[e]=""}))}),0)},getAttendantsOrResourcesListBySearch(e,s){return s?e.filter((e=>new RegExp(s,"ig").test([e.text].join("")))):e}},emits:["close","chooseCustomer","save"],components:{CustomField:Gs}};const Xs=(0,P.Z)(Js,[["render",$s],["__scopeId","data-v-13e7610e"]]);var et=Xs,st={name:"EditBookingItem",props:{booking:{default:function(){return{}}},customer:{default:function(){return{}}}},components:{EditBooking:et},mounted(){this.toggleShow()},data:function(){return{isLoading:!1,isSaved:!1,show:!0}},methods:{close(e){this.$emit("close",e)},chooseCustomer(){this.$emit("chooseCustomer")},save(e){this.isLoading=!0,this.axios.put("bookings/"+this.booking.id,e).then((e=>{this.isSaved=!0,setTimeout((()=>{this.isSaved=!1}),3e3),this.axios.get("bookings/"+e.data.id).then((e=>{this.close(e.data.items[0])}))}),(e=>{this.isError=!0,this.errorMessage=e.response.data.message,setTimeout((()=>{this.isError=!1,this.errorMessage=""}),3e3)})).finally((()=>{this.isLoading=!1}))},toggleShow(){this.show=!1,setTimeout((()=>{this.show=!0}),0)}},emits:["close","chooseCustomer"]};const tt=(0,P.Z)(st,[["render",je]]);var ot=tt;const it={class:"title"},at={class:"search"},lt={class:"filters"},nt={class:"customers-list"},rt={key:2,class:"no-result"};function ut(e,s,t,o,a,n){const r=(0,i.up)("font-awesome-icon"),u=(0,i.up)("b-form-input"),d=(0,i.up)("b-button"),m=(0,i.up)("b-col"),c=(0,i.up)("b-row"),h=(0,i.up)("b-spinner"),p=(0,i.up)("CustomerItem");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",it,(0,l.zw)(this.getLabel("customersAddressBookTitle")),1),(0,i._)("div",at,[(0,i.Wm)(r,{icon:"fa-solid fa-magnifying-glass",class:"search-icon"}),(0,i.Wm)(u,{modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=s=>e.search=s),class:"search-input"},null,8,["modelValue"]),e.search?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"fa-solid fa-circle-xmark",class:"clear",onClick:s[1]||(s[1]=s=>e.search="")})):(0,i.kq)("",!0)]),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",lt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filters,(s=>((0,i.wg)(),(0,i.j4)(d,{variant:"outline-primary",key:s.value,onClick:t=>e.searchFilter=s.value,pressed:e.searchFilter===s.value},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(s.label),1)])),_:2},1032,["onClick","pressed"])))),128))])])),_:1})])),_:1}),(0,i._)("div",nt,[e.isLoading?((0,i.wg)(),(0,i.j4)(h,{key:0,variant:"primary"})):e.customersList.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.customersList,(e=>((0,i.wg)(),(0,i.j4)(p,{key:e.id,customer:e,chooseCustomerAvailable:t.chooseCustomerAvailable,onChoose:s=>n.choose(e),onShowImages:n.showImages,onEdit:n.edit},null,8,["customer","chooseCustomerAvailable","onChoose","onShowImages","onEdit"])))),128)):((0,i.wg)(),(0,i.iD)("span",rt,(0,l.zw)(this.getLabel("customersAddressBookNoResultLabel")),1))]),t.chooseCustomerAvailable?((0,i.wg)(),(0,i.j4)(d,{key:0,variant:"primary",class:"go-back",onClick:n.closeChooseCustomer},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("goBackButtonLabel")),1)])),_:1},8,["onClick"])):(0,i.kq)("",!0)])}const dt={class:"customer"},mt={class:"customer-firstname"},ct={class:"customer-lastname"},ht={class:"customer-email"},pt={key:0,class:"customer-phone"},ft={class:"total-order-sum"},gt=["innerHTML"],wt={class:"total-order-count"},vt={class:"wrapper"},bt={key:0,class:"button-choose"},_t=["src"],kt={class:"customer-phone-wrapper"},yt={key:0},Lt=["href"],Ct=["href"],St=["href"];function Wt(e,s,t,a,n,r){const u=(0,i.up)("b-col"),d=(0,i.up)("font-awesome-icon"),m=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",dt,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"8",class:"customer-info"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"customer-first-last-name-wrapper",onClick:s[0]||(s[0]=(...e)=>r.edit&&r.edit(...e))},[(0,i._)("span",mt,(0,l.zw)(r.customerFirstname),1),(0,i._)("span",ct,(0,l.zw)(r.customerLastname),1)]),(0,i._)("div",ht,(0,l.zw)(r.customerEmail),1),r.customerPhone?((0,i.wg)(),(0,i.iD)("div",pt,(0,l.zw)(r.customerPhone),1)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(u,{sm:"4",class:"total-order-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("span",ft,[(0,i.Wm)(d,{icon:"fa-solid fa-chart-simple"}),(0,i._)("span",{innerHTML:r.totalSum},null,8,gt)]),(0,i._)("span",wt,[(0,i.Wm)(d,{icon:"fa-solid fa-medal"}),(0,i.Uk)(" "+(0,l.zw)(r.customerScore),1)])])),_:1})])),_:1}),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"total-info"},{default:(0,i.w5)((()=>[(0,i._)("div",vt,[t.chooseCustomerAvailable?((0,i.wg)(),(0,i.iD)("div",bt,[(0,i.Wm)(d,{icon:"fa-solid fa-circle-plus",onClick:(0,o.iM)(r.choose,["prevent"])},null,8,["onClick"])])):(0,i.kq)("",!0),(0,i._)("div",{class:"images",onClick:s[1]||(s[1]=(0,o.iM)(((...e)=>r.showImages&&r.showImages(...e)),["prevent"]))},[r.photos.length>0?((0,i.wg)(),(0,i.iD)("img",{key:0,src:r.photos.length?r.photos[0]["url"]:"",class:"photo"},null,8,_t)):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"fa-solid fa-images"}))])]),(0,i._)("div",kt,[r.customerPhone?((0,i.wg)(),(0,i.iD)("span",yt,[(0,i._)("a",{href:"tel:"+r.customerPhone,class:"phone"},[(0,i.Wm)(d,{icon:"fa-solid fa-phone"})],8,Lt),(0,i._)("a",{href:"sms:"+r.customerPhone,class:"sms"},[(0,i.Wm)(d,{icon:"fa-solid fa-message"})],8,Ct),(0,i._)("a",{href:"https://wa.me/"+r.customerPhone,class:"whatsapp"},[(0,i.Wm)(d,{icon:"fa-brands fa-whatsapp"})],8,St)])):(0,i.kq)("",!0)])])),_:1})])),_:1})])])),_:1})])),_:1})}var Dt={name:"CustomerItem",props:{customer:{default:function(){return{}}},chooseCustomerAvailable:{default:function(){return!1}}},computed:{customerFirstname(){return this.customer.first_name},customerLastname(){return this.customer.last_name},customerEmail(){return this.customer.email},customerPhone(){return this.customer.phone?this.customer.phone_country_code+this.customer.phone:""},customerScore(){return this.customer.score},totalSum(){return this.$root.settings.currency_symbol+this.customer.total_amount_reservations},totalCount(){return this.customer.bookings.length>0?this.customer.bookings.length:"-"},photos(){return this.customer.photos}},methods:{choose(){this.$emit("choose")},showImages(){this.$emit("showImages",this.customer)},edit(){this.$emit("edit",this.customer)}},emits:["choose","showImages","edit"]};const It=(0,P.Z)(Dt,[["render",Wt],["__scopeId","data-v-7796d6ea"]]);var jt=It,At={name:"CustomersAddressBook",props:{chooseCustomerAvailable:{default:function(){return!1}},shop:{default:function(){return{}}},customer:{default:function(){return{}}}},mounted(){this.load()},watch:{searchFilter(e){e&&this.load()},search(e){e?(this.searchFilter="",this.loadSearch()):this.searchFilter="a|b"},shop(){this.load()},customer(){this.customer&&this.customersList.forEach(((e,s)=>{this.customer.id===e.id&&(this.customersList[s]=this.customer)}))}},data:function(){return{filters:[{label:"a - b",value:"a|b"},{label:"c - d",value:"c|d"},{label:"e - f",value:"e|f"},{label:"g - h",value:"g|h"},{label:"i - j",value:"i|j"},{label:"k - l",value:"k|l"},{label:"m - n",value:"m|n"},{label:"o - p",value:"o|p"},{label:"q - r",value:"q|r"},{label:"s - t",value:"s|t"},{label:"u - v",value:"u|v"},{label:"w - x",value:"w|x"},{label:"y - z",value:"y|z"}],searchFilter:"a|b",customersList:[],isLoading:!1,search:"",timeout:null}},methods:{closeChooseCustomer(){this.$emit("closeChooseCustomer")},choose(e){this.$emit("choose",e)},load(){this.isLoading=!0,this.customersList=[],this.axios.get("customers",{params:{search:this.searchFilter,search_type:"start_with",search_field:"first_name",order_by:"first_name_last_name",shop:this.shop?this.shop.id:null}}).then((e=>{this.customersList=e.data.items})).finally((()=>{this.isLoading=!1}))},loadSearch(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.isLoading=!0,this.customersList=[],this.axios.get("customers",{params:{search:this.search,order_by:"first_name_last_name",shop:this.shop?this.shop.id:null}}).then((e=>{this.customersList=e.data.items})).finally((()=>{this.isLoading=!1}))}),1e3)},showImages(e){this.$emit("showImages",e)},edit(e){this.$emit("edit",e)}},components:{CustomerItem:jt},emits:["closeChooseCustomer","choose","showImages","edit"]};const Tt=(0,P.Z)(At,[["render",ut],["__scopeId","data-v-a5f519f6"]]);var xt=Tt;const zt={class:"images"},Vt={class:"photo-wrapper"},Yt=["src"],Pt=["onClick"],Et=["onClick"],Ht={key:2,class:"date"},Ft={class:"take-photo-label"},Mt={class:"select-photo-label"};function Ut(e,s,t,a,n,r){const u=(0,i.up)("b-spinner"),d=(0,i.up)("font-awesome-icon"),m=(0,i.up)("slide"),c=(0,i.up)("navigation"),h=(0,i.up)("pagination"),p=(0,i.up)("carousel"),f=(0,i.up)("b-col"),g=(0,i.up)("b-button"),w=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",zt,[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{sm:"12",class:"list"},{default:(0,i.w5)((()=>[n.isLoading?((0,i.wg)(),(0,i.j4)(u,{key:0,variant:"primary"})):(0,i.kq)("",!0),(0,i.Wm)(p,{ref:"carousel",modelValue:n.photoIndex,wrapAround:!0,transition:0},{addons:(0,i.w5)((({slidesCount:e})=>[e>1?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),e>1?((0,i.wg)(),(0,i.j4)(h,{key:1})):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.photos,((s,t)=>((0,i.wg)(),(0,i.j4)(m,{key:t},{default:(0,i.w5)((()=>[(0,i._)("span",Vt,[(0,i._)("img",{src:s.url,class:"photo"},null,8,Yt),s.attachment_id?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"photo-icon-wrapper fa-trash-wrapper",onClick:(0,o.iM)((e=>r.remove(s)),["prevent","stop"])},[(0,i.Wm)(d,{icon:"fa-solid fa-trash"})],8,Pt)):(0,i.kq)("",!0),s.attachment_id?((0,i.wg)(),(0,i.iD)("span",{key:1,class:"photo-icon-wrapper fa-circle-check-wrapper",onClick:(0,o.iM)((e=>r.setAsDefault(s)),["prevent","stop"])},[(0,i.Wm)(d,{icon:"fa-regular fa-circle-check",class:(0,l.C_)({default:s.default})},null,8,["class"])],8,Et)):(0,i.kq)("",!0),s.attachment_id?((0,i.wg)(),(0,i.iD)("span",Ht,(0,l.zw)(e.dateFormat(1e3*s.created,"DD.MM.YYYY")),1)):(0,i.kq)("",!0)])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(f,{sm:"12",class:"buttons"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{sm:"6",class:"take-photo",onClick:s[1]||(s[1]=e=>this.$refs.takePhoto.click())},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{variant:"primary",size:"lg"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-camera"})])),_:1}),(0,i._)("div",Ft,(0,l.zw)(this.getLabel("takePhotoButtonLabel")),1),(0,i.wy)((0,i._)("input",{type:"file",accept:"image/*",capture:"camera",ref:"takePhoto",onChange:s[0]||(s[0]=(...e)=>r.uploadTakePhoto&&r.uploadTakePhoto(...e))},null,544),[[o.F8,!1]])])),_:1}),(0,i.Wm)(f,{sm:"6",class:"select-photo"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{variant:"primary",size:"lg",onClick:s[2]||(s[2]=e=>this.$refs.downloadImages.click())},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"fa-solid fa-cloud-arrow-up"})])),_:1}),(0,i._)("div",Mt,(0,l.zw)(this.getLabel("selectPhotoButtonLabel")),1),(0,i.wy)((0,i._)("input",{type:"file",accept:"image/*",ref:"downloadImages",onChange:s[3]||(s[3]=(...e)=>r.uploadFromPhone&&r.uploadFromPhone(...e))},null,544),[[o.F8,!1]])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{sm:"12",class:"back"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{variant:"outline-primary",onClick:r.close,size:"lg"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("backImagesButtonLabel")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1})])),_:1})}var Bt={name:"ImagesList",props:{customer:{default:function(){return{}}}},data(){let e=0;return this.customer.photos.forEach(((s,t)=>{+s.default&&(e=t)})),{baseUrl:"/{SLN_PWA_DIST_PATH}/",customerData:this.customer,photoIndex:e,isLoading:!1}},computed:{photos(){return this.customerData.photos.length?this.customerData.photos:[{url:this.baseUrl+"img/placeholder-image.png"}]},id(){return this.customerData.id}},methods:{close(){this.$emit("close",this.customerData)},uploadTakePhoto(){let e=this.$refs.takePhoto.files[0];this.upload(e),this.$refs.takePhoto.value=""},uploadFromPhone(){let e=this.$refs.downloadImages.files[0];this.upload(e),this.$refs.downloadImages.value=""},upload(e,s){let t=new FormData;t.append("file",e,s),this.isLoading=!0,this.axios.post("customers/"+this.id+"/photos",t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.customerData=e.data.items[0]})).finally((()=>{this.isLoading=!1}))},remove(e){this.isLoading=!0,this.axios.delete("customers/"+this.id+"/photos/"+e.attachment_id).then((e=>{this.customerData=e.data.items[0]})).finally((()=>{this.isLoading=!1}))},setAsDefault(e){this.isLoading=!0,this.axios.put("customers/"+this.id+"/photos/"+e.attachment_id,{photo:Object.assign({},e,{default:1})}).then((e=>{this.customerData=e.data.items[0],this.$refs.carousel.slideTo(0)})).finally((()=>{this.isLoading=!1}))}},emits:["close"]};const qt=(0,P.Z)(Bt,[["render",Ut],["__scopeId","data-v-271d799f"]]);var $t=qt,Nt={name:"UpcomingReservationsTab",props:{shop:{default:function(){return{}}}},components:{UpcomingReservations:$,BookingDetails:Ie,EditBookingItem:ot,CustomersAddressBook:xt,ImagesList:$t},data:function(){return{showItem:!1,editItem:!1,item:null,isChooseCustomer:!1,customer:null,isShowCustomerImages:!1,showImagesCustomer:null}},methods:{setShowItem(e){this.showItem=!0,this.item=e},closeShowItem(){this.showItem=!1},setEditItem(){this.editItem=!0},closeEditItem(e){this.editItem=!1,this.customer=null,e&&this.setShowItem(e)},chooseCustomer(){this.isChooseCustomer=!0},closeChooseCustomer(){this.isChooseCustomer=!1},choose(e){this.customer=e,this.closeChooseCustomer()},showCustomerImages(e){this.isShowCustomerImages=!0,this.showImagesCustomer=e,this.$emit("hideTabsHeader",!0)},closeShowCustomerImages(e){this.item.customer_photos=e.photos,this.isShowCustomerImages=!1,this.$emit("hideTabsHeader",!1)}},emits:["hideTabsHeader"]};const Ot=(0,P.Z)(Nt,[["render",r]]);var Rt=Ot;function Zt(e,s,t,o,a,l){const n=(0,i.up)("b-spinner"),r=(0,i.up)("ImagesList"),u=(0,i.up)("CustomersAddressBook"),d=(0,i.up)("AddBookingItem"),m=(0,i.up)("EditBookingItem"),c=(0,i.up)("BookingDetails"),h=(0,i.up)("ReservationsCalendar");return(0,i.wg)(),(0,i.iD)("div",null,[e.isLoading?((0,i.wg)(),(0,i.j4)(n,{key:0,variant:"primary"})):e.isShowCustomerImages?((0,i.wg)(),(0,i.j4)(r,{key:1,customer:e.showImagesCustomer,onClose:l.closeShowCustomerImages},null,8,["customer","onClose"])):e.isChooseCustomer?((0,i.wg)(),(0,i.j4)(u,{key:2,onCloseChooseCustomer:l.closeChooseCustomer,chooseCustomerAvailable:!0,onChoose:l.choose,shop:e.addItem?t.shop:e.item.shop},null,8,["onCloseChooseCustomer","onChoose","shop"])):e.addItem?((0,i.wg)(),(0,i.j4)(d,{key:3,onClose:l.close,date:e.date,time:e.time,customer:e.customer,onChooseCustomer:l.chooseCustomer,shop:t.shop},null,8,["onClose","date","time","customer","onChooseCustomer","shop"])):e.editItem?((0,i.wg)(),(0,i.j4)(m,{key:4,booking:e.item,customer:e.customer,onClose:l.closeEditItem,onChooseCustomer:l.chooseCustomer},null,8,["booking","customer","onClose","onChooseCustomer"])):e.showItem?((0,i.wg)(),(0,i.j4)(c,{key:5,booking:e.item,onClose:l.closeShowItem,onEdit:l.setEditItem,onShowCustomerImages:l.showCustomerImages},null,8,["booking","onClose","onEdit","onShowCustomerImages"])):((0,i.wg)(),(0,i.j4)(h,{key:6,onShowItem:l.setShowItem,onAdd:l.add,shop:t.shop},null,8,["onShowItem","onAdd","shop"]))])}const Kt={class:"title"},Qt={class:"search"},Gt={class:"calendar"},Jt={key:0,class:"day day-with-bookings"},Xt={key:1,class:"day day-full-booked"},eo={key:2,class:"day day-available-book"},so={key:3,class:"day day-disable-book"},to={key:0,class:"spinner-wrapper"},oo={class:"attendants"},io={class:"slots"},ao={key:1},lo={key:2};function no(e,s,t,o,a,n){const r=(0,i.up)("font-awesome-icon"),u=(0,i.up)("b-form-input"),d=(0,i.up)("Datepicker"),m=(0,i.up)("b-spinner"),c=(0,i.up)("b-col"),h=(0,i.up)("b-row"),p=(0,i.up)("b-button"),f=(0,i.up)("BookingSlot"),g=(0,i.up)("BookingItem"),w=(0,i.up)("BookingBlockSlot");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",Kt,(0,l.zw)(this.getLabel("reservationsCalendarTitle")),1),(0,i._)("div",Qt,[(0,i.Wm)(r,{icon:"fa-solid fa-magnifying-glass",class:"search-icon"}),(0,i.Wm)(u,{modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=s=>e.search=s),class:"search-input"},null,8,["modelValue"]),e.search?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"fa-solid fa-circle-xmark",class:"clear",onClick:s[1]||(s[1]=s=>e.search="")})):(0,i.kq)("",!0)]),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Gt,[(0,i.Wm)(d,{modelValue:e.date,"onUpdate:modelValue":s[2]||(s[2]=s=>e.date=s),inline:"",autoApply:"",noSwipe:"",enableTimePicker:!1,monthChangeOnScroll:!1,onUpdateMonthYear:n.handleMonthYear,locale:e.locale},{day:(0,i.w5)((({day:e,date:s})=>[n.isDayWithBookings(s)?((0,i.wg)(),(0,i.iD)("div",Jt,(0,l.zw)(e),1)):n.isDayFullBooked(s)?((0,i.wg)(),(0,i.iD)("div",Xt,(0,l.zw)(e),1)):n.isAvailableBookings(s)?((0,i.wg)(),(0,i.iD)("div",eo,(0,l.zw)(e),1)):((0,i.wg)(),(0,i.iD)("div",so,(0,l.zw)(e),1))])),_:1},8,["modelValue","onUpdateMonthYear","locale"]),e.isLoadingCalendar?((0,i.wg)(),(0,i.iD)("div",to)):(0,i.kq)("",!0),e.isLoadingCalendar?((0,i.wg)(),(0,i.j4)(m,{key:1,variant:"primary"})):(0,i.kq)("",!0)])])),_:1})])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",oo,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.attendants,(s=>((0,i.wg)(),(0,i.j4)(p,{key:s.id,variant:"outline-primary",pressed:e.filterAttendant===s.id,onClick:t=>e.filterAttendant===s.id?e.filterAttendant="":e.filterAttendant=s.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(s.name),1)])),_:2},1032,["pressed","onClick"])))),128))])])),_:1})])),_:1}),(0,i._)("div",io,[e.isLoadingTimeslots?((0,i.wg)(),(0,i.j4)(m,{key:0,variant:"primary"})):e.timeslots.length>0?((0,i.wg)(),(0,i.iD)("div",ao,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.timeslots,((s,o)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:s},[(0,i.Wm)(f,{timeslot:s,onAdd:e=>n.add(s),isAvailable:n.isAvailable(s,s)},null,8,["timeslot","onAdd","isAvailable"]),n.getBookingsListByTime(s,e.timeslots[o+1]).length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(n.getBookingsListByTime(s,e.timeslots[o+1]),(e=>((0,i.wg)(),(0,i.j4)(g,{key:e.id,booking:e,onDeleteItem:s=>n.deleteItem(e.id),onShowDetails:s=>n.showDetails(e)},null,8,["booking","onDeleteItem","onShowDetails"])))),128)):o<e.timeslots.length-1?((0,i.wg)(),(0,i.j4)(w,{key:1,start:e.timeslots[o],end:e.timeslots[o+1],date:e.date,shop:t.shop,onLock:n.lock,onUnlock:n.unlock,isLock:n.isLock(e.timeslots[o],e.timeslots[o+1])},null,8,["start","end","date","shop","onLock","onUnlock","isLock"])):(0,i.kq)("",!0)],64)))),128))])):((0,i.wg)(),(0,i.iD)("span",lo,(0,l.zw)(this.getLabel("noResultTimeslotsLabel")),1))])])}const ro=e=>((0,i.dD)("data-v-79d4fda0"),e=e(),(0,i.Cn)(),e),uo={class:"timeslot"},mo={class:"time"},co=ro((()=>(0,i._)("span",{class:"line"},null,-1))),ho={class:"action"};function po(e,s,t,o,a,n){const r=(0,i.up)("font-awesome-icon"),u=(0,i.up)("b-col"),d=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",uo,[(0,i._)("span",mo,(0,l.zw)(n.timeslotValue),1),co,(0,i._)("span",ho,[(0,i.Wm)(r,{icon:"fa-solid fa-circle-plus",class:(0,l.C_)({available:t.isAvailable}),onClick:n.add},null,8,["class","onClick"])])])])),_:1})])),_:1})}var fo={name:"BookingSlot",props:{timeslot:{default:function(){return"08:00"}},isAvailable:{default:function(){return!0}}},computed:{timeslotValue(){const e="default"===this.timeFormat?"HH:mm":"h:mma";return this.moment(this.timeslot,"HH:mm").format(e)},timeFormat(){return this.$root.settings&&this.$root.settings.time_format?this.$root.settings.time_format.type:"default"}},methods:{add(){this.$emit("add")}},emits:["add"]};const go=(0,P.Z)(fo,[["render",po],["__scopeId","data-v-79d4fda0"]]);var wo=go;const vo={class:"block-slot"};function bo(e,s,t,o,a,l){const n=(0,i.up)("b-spinner"),r=(0,i.up)("font-awesome-icon"),u=(0,i.up)("b-col"),d=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",vo,[e.isLoading?((0,i.wg)(),(0,i.j4)(n,{key:0,variant:"primary"})):t.isLock?((0,i.wg)(),(0,i.j4)(r,{key:2,icon:"fa-solid fa-lock",onClick:l.unlock},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"fa-solid fa-unlock",onClick:l.lock},null,8,["onClick"]))])])),_:1})])),_:1})}var _o={name:"BookingBlockSlot",props:{isLock:{default:function(){return!1}},start:{default:function(){return"08:00"}},end:{default:function(){return"08:30"}},date:{default:function(){return null}},shop:{default:function(){return{}}}},data:function(){return{isLoading:!1}},computed:{holidayRule(){return{from_date:this.moment(this.date).format("YYYY-MM-DD"),to_date:this.moment(this.date).format("YYYY-MM-DD"),from_time:this.moment(this.start,"HH:mm").format("HH:mm"),to_time:this.moment(this.end,"HH:mm").format("HH:mm"),daily:!0,shop:this.shop?this.shop.id:0}}},methods:{lock(){this.isLoading=!0,this.axios.post("holiday-rules",this.holidayRule).then((e=>{this.$emit("lock",e.data.items)})).finally((()=>{this.isLoading=!1}))},unlock(){this.isLoading=!0,this.axios.delete("holiday-rules",{data:this.holidayRule}).then((e=>{this.$emit("unlock",e.data.items)})).finally((()=>{this.isLoading=!1}))}},emits:["lock","unlock"]};const ko=(0,P.Z)(_o,[["render",bo],["__scopeId","data-v-175336eb"]]);var yo=ko,Lo={name:"ReservationsCalendar",props:{shop:{default:function(){return{}}}},mounted(){this.load(),setTimeout((()=>{window.document.querySelectorAll(".dp__calendar")[0].appendChild(window.document.querySelectorAll(".spinner-wrapper")[0]),window.document.querySelectorAll(".dp__calendar")[0].appendChild(window.document.querySelectorAll(".calendar .spinner-border")[0])}),0),setInterval((()=>this.update()),6e4)},data:function(){return{date:new Date,timeslots:[],isLoadingTimeslots:!1,lockedTimeslots:[],availabilityStats:[],bookingsList:[],filterAttendant:"",search:"",timeout:null,availabilityIntervals:{},isLoadingCalendar:!1}},watch:{date(){this.loadLockedTimeslots(),this.loadBookingsList(),this.loadAvailabilityIntervals()},search(e){e?this.loadSearchBookingsList():this.loadBookingsList()},timeslots(){this.loadAvailabilityIntervals()},lockedTimeslots(){this.timeslots.length>0&&this.loadAvailabilityIntervals()},shop(){this.load()}},computed:{attendants(){var e={};return e[0]={id:"",name:this.getLabel("allTitle")},this.bookingsList.forEach((s=>{s.services.forEach((s=>{s.assistant_id>0&&(e[s.assistant_id]={id:s.assistant_id,name:s.assistant_name})}))})),Object.values(e).length>1?Object.values(e):[]},filteredBookingsList(){return this.bookingsList.filter((e=>{var s=!1;return e.services.forEach((e=>{this.filterAttendant===e.assistant_id&&(s=!0)})),""===this.filterAttendant||s}))}},methods:{load(){this.loadTimeslots(),this.loadLockedTimeslots();var e=this.date,s=e.getFullYear(),t=e.getMonth(),o=new Date(s,t,1),i=new Date(s,t+1,0);this.loadAvailabilityStats(o,i),this.loadBookingsList()},add(e){this.$emit("add",this.date,e||this.timeslots[0])},lock(e){this.lockedTimeslots=e},unlock(e){this.lockedTimeslots=e},loadTimeslots(){this.isLoadingTimeslots=!0,this.axios.get("calendar/intervals",{params:{shop:this.shop?this.shop.id:null}}).then((e=>{this.timeslots=e.data.items})).finally((()=>{this.isLoadingTimeslots=!1}))},loadLockedTimeslots(){this.isLoadingTimeslots=!0,this.axios.get("holiday-rules",{params:{date:this.moment(this.date).format("YYYY-MM-DD"),shop:this.shop?this.shop.id:null}}).then((e=>{this.lockedTimeslots=e.data.items})).finally((()=>{this.isLoadingTimeslots=!1}))},loadAvailabilityStats(e,s){this.isLoadingCalendar=!0,this.axios.get("availability/stats",{params:{from_date:this.moment(e).format("YYYY-MM-DD"),to_date:this.moment(s).format("YYYY-MM-DD"),shop:this.shop?this.shop.id:null}}).then((e=>{this.availabilityStats=e.data.stats})).finally((()=>{this.isLoadingCalendar=!1}))},loadBookingsList(){this.isLoadingTimeslots=!0,this.bookingsList=[],this.axios.get("bookings",{params:{start_date:this.moment(this.date).format("YYYY-MM-DD"),end_date:this.moment(this.date).format("YYYY-MM-DD"),per_page:-1,statuses:["sln-b-pendingpayment","sln-b-pending","sln-b-paid","sln-b-paylater","sln-b-canceled","sln-b-confirmed"],shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items})).finally((()=>{this.isLoadingTimeslots=!1}))},loadAvailabilityIntervals(){this.axios.post("availability/intervals",{date:this.moment(this.date).format("YYYY-MM-DD"),time:this.timeslots[0],shop:this.shop?this.shop.id:0}).then((e=>{this.availabilityIntervals=e.data.intervals}))},isAvailable(e){return this.availabilityIntervals.universalSuggestedDate===this.moment(this.date).format("YYYY-MM-DD")&&Object.values(this.availabilityIntervals.times).indexOf(e)>-1},isLock(e,s){var t=!1;return this.lockedTimeslots.forEach((o=>{var i=this.moment(o.from_date+" "+o.from_time,"YYYY-MM-DD HH:mm").unix(),a=this.moment(o.to_date+" "+o.to_time,"YYYY-MM-DD HH:mm").unix(),l=this.moment(this.date).format("YYYY-MM-DD"),n=this.moment(l+" "+e,"YYYY-MM-DD HH:mm").unix(),r=this.moment(l+" "+s,"YYYY-MM-DD HH:mm").unix();i<=n&&a>=r&&a>n&&(t=!0)})),t},handleMonthYear(e){var s=new Date(e.year,e.month,1),t=new Date(e.year,e.month+1,0);this.loadAvailabilityStats(s,t)},isDayWithBookings(e){var s=!1;return this.availabilityStats.forEach((t=>{t.date===this.moment(e).format("YYYY-MM-DD")&&t.data&&t.data.bookings>0&&(s=!0)})),s},isAvailableBookings(e){var s=!1;return this.availabilityStats.forEach((t=>{t.date===this.moment(e).format("YYYY-MM-DD")&&t.available&&!t.full_booked&&(s=!0)})),s},isDayFullBooked(e){var s=!1;return this.availabilityStats.forEach((t=>{t.date===this.moment(e).format("YYYY-MM-DD")&&t.full_booked&&(s=!0)})),s},getBookingsListByTime(e,s){return this.filteredBookingsList.filter((t=>this.moment(t.time,"HH:mm").unix()>=this.moment(e,"HH:mm").unix()&&(!s||this.moment(t.time,"HH:mm").unix()<this.moment(s,"HH:mm").unix()))).sort(((e,s)=>this.moment(e.time,"HH:mm").unix()-this.moment(s.time,"HH:mm").unix()))},deleteItem(e){this.axios.delete("bookings/"+e).then((()=>{this.bookingsList=this.bookingsList.filter((s=>s.id!==e))}))},showDetails(e){this.$emit("showItem",e)},loadSearchBookingsList(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.isLoadingTimeslots=!0,this.bookingsList=[],this.axios.get("bookings",{params:{start_date:this.moment(this.date).format("YYYY-MM-DD"),end_date:this.moment(this.date).format("YYYY-MM-DD"),search:this.search,per_page:-1,statuses:["sln-b-pendingpayment","sln-b-pending","sln-b-paid","sln-b-paylater","sln-b-canceled","sln-b-confirmed"],shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items})).finally((()=>{this.isLoadingTimeslots=!1}))}),1e3)},update(){this.updateBookingsList()},updateBookingsList(){this.axios.get("bookings",{params:{start_date:this.moment(this.date).format("YYYY-MM-DD"),end_date:this.moment(this.date).format("YYYY-MM-DD"),per_page:-1,statuses:["sln-b-pendingpayment","sln-b-pending","sln-b-paid","sln-b-paylater","sln-b-canceled","sln-b-confirmed"],shop:this.shop?this.shop.id:null}}).then((e=>{this.bookingsList=e.data.items}))}},components:{BookingSlot:wo,BookingBlockSlot:yo,BookingItem:U},emits:["add","showItem"]};const Co=(0,P.Z)(Lo,[["render",no],["__scopeId","data-v-7ed81640"]]);var So=Co;function Wo(e,s,t,a,n,r){const u=(0,i.up)("EditBooking");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",null,(0,l.zw)(this.getLabel("addReservationTitle")),1),(0,i.Wm)(u,{date:t.date,time:t.time,customerID:t.customer?t.customer.id:"",customerFirstname:t.customer?t.customer.first_name:"",customerLastname:t.customer?t.customer.last_name:"",customerEmail:t.customer?t.customer.email:"",customerPhone:t.customer?t.customer.phone:"",customerAddress:t.customer?t.customer.address:"",customerPersonalNotes:t.customer?t.customer.note:"",status:"sln-b-confirmed",shop:t.shop,isLoading:e.isLoading,isSaved:e.isSaved,isError:e.isError,errorMessage:e.errorMessage,onClose:r.close,onChooseCustomer:r.chooseCustomer,onSave:r.save},null,8,["date","time","customerID","customerFirstname","customerLastname","customerEmail","customerPhone","customerAddress","customerPersonalNotes","shop","isLoading","isSaved","isError","errorMessage","onClose","onChooseCustomer","onSave"])],512)),[[o.F8,e.show]])}var Do={name:"AddBookingItem",props:{date:{default:function(){return""}},time:{default:function(){return""}},customer:{default:function(){return{}}},shop:{default:function(){return{}}}},mounted(){this.toggleShow()},components:{EditBooking:et},data:function(){return{isLoading:!1,isSaved:!1,isError:!1,errorMessage:"",show:!0}},methods:{close(e){this.$emit("close",e)},chooseCustomer(){this.$emit("chooseCustomer")},save(e){this.isLoading=!0,this.axios.post("bookings",e).then((e=>{this.isSaved=!0,setTimeout((()=>{this.isSaved=!1}),3e3),this.axios.get("bookings/"+e.data.id).then((e=>{this.close(e.data.items[0])}))}),(e=>{this.isError=!0,this.errorMessage=e.response.data.message,setTimeout((()=>{this.isError=!1,this.errorMessage=""}),3e3)})).finally((()=>{this.isLoading=!1}))},toggleShow(){this.show=!1,setTimeout((()=>{this.show=!0}),0)}},emits:["close","chooseCustomer"]};const Io=(0,P.Z)(Do,[["render",Wo]]);var jo=Io,Ao={name:"ReservationsCalendarTab",props:{shop:{default:function(){return{}}}},components:{ReservationsCalendar:So,AddBookingItem:jo,CustomersAddressBook:xt,BookingDetails:Ie,EditBookingItem:ot,ImagesList:$t},mounted(){let e=this.getQueryParams();"undefined"!==typeof e["booking_id"]&&(this.isLoading=!0,this.axios.get("bookings/"+e["booking_id"]).then((e=>{this.isLoading=!1,this.setShowItem(e.data.items[0])})))},data:function(){return{addItem:!1,showItem:!1,isChooseCustomer:!1,item:null,editItem:!1,customer:null,date:"",time:"",isLoading:!1,isShowCustomerImages:!1,showImagesCustomer:null}},methods:{add(e,s){this.addItem=!0,this.date=e,this.time=s},setShowItem(e){this.showItem=!0,this.item=e},close(e){this.addItem=!1,this.customer=null,e&&this.setShowItem(e)},chooseCustomer(){this.isChooseCustomer=!0},closeChooseCustomer(){this.isChooseCustomer=!1},closeShowItem(){this.showItem=!1},setEditItem(){this.editItem=!0},closeEditItem(e){this.editItem=!1,this.customer=null,e&&this.setShowItem(e)},choose(e){this.customer=e,this.closeChooseCustomer()},showCustomerImages(e){this.isShowCustomerImages=!0,this.showImagesCustomer=e,this.$emit("hideTabsHeader",!0)},closeShowCustomerImages(e){this.item.customer_photos=e.photos,this.isShowCustomerImages=!1,this.$emit("hideTabsHeader",!1)}},emits:["hideTabsHeader"]};const To=(0,P.Z)(Ao,[["render",Zt]]);var xo=To;function zo(e,s,t,o,a,l){const n=(0,i.up)("ImagesList"),r=(0,i.up)("CustomerDetails"),u=(0,i.up)("CustomersAddressBook");return(0,i.wg)(),(0,i.iD)("div",null,[e.isShowImages?((0,i.wg)(),(0,i.j4)(n,{key:0,customer:e.customer,onClose:l.closeShowImages},null,8,["customer","onClose"])):e.editCustomer?((0,i.wg)(),(0,i.j4)(r,{key:1,onClose:l.closeCustomerDetails,customerID:e.customer.id,customerFirstname:e.customer.first_name,customerLastname:e.customer.last_name,customerEmail:e.customer.email,customerPhone:e.customer.phone,customerAddress:e.customer.address,customerPersonalNotes:e.customer.note},null,8,["onClose","customerID","customerFirstname","customerLastname","customerEmail","customerPhone","customerAddress","customerPersonalNotes"])):((0,i.wg)(),(0,i.j4)(u,{key:2,shop:t.shop,onShowImages:l.showImages,onEdit:l.edit,customer:e.customerData,ref:"customersAddressBook"},null,8,["shop","onShowImages","onEdit","customer"]))])}const Vo={class:"customer-details-info"},Yo={class:"customer-firstname"},Po={class:"customer-lastname"},Eo={class:"customer-email"},Ho={class:"customer-address"},Fo={class:"customer-phone"},Mo={class:"customer-details-extra-info"},Uo={class:"customer-details-extra-info-header"},Bo={class:"customer-details-extra-info-header-title"},qo=["aria-expanded"],$o={class:"customer-personal-notes"},No={class:"label",for:"customer_personal_notes"};function Oo(e,s,t,o,a,n){const r=(0,i.up)("b-form-input"),u=(0,i.up)("b-col"),d=(0,i.up)("b-row"),m=(0,i.up)("vue-tel-input"),c=(0,i.up)("font-awesome-icon"),h=(0,i.up)("CustomField"),p=(0,i.up)("b-form-textarea"),f=(0,i.up)("b-collapse"),g=(0,i.up)("b-spinner"),w=(0,i.up)("b-button"),v=(0,i.up)("b-alert");return(0,i.wg)(),(0,i.j4)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Vo,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Yo,[(0,i.Wm)(r,{placeholder:this.getLabel("customerFirstnamePlaceholder"),modelValue:e.elCustomerFirstname,"onUpdate:modelValue":s[0]||(s[0]=s=>e.elCustomerFirstname=s),class:(0,l.C_)({required:e.requiredFields.indexOf("customer_first_name")>-1})},null,8,["placeholder","modelValue","class"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Po,[(0,i.Wm)(r,{placeholder:this.getLabel("customerLastnamePlaceholder"),modelValue:e.elCustomerLastname,"onUpdate:modelValue":s[1]||(s[1]=s=>e.elCustomerLastname=s)},null,8,["placeholder","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Eo,[(0,i.Wm)(r,{placeholder:this.getLabel("customerEmailPlaceholder"),modelValue:e.elCustomerEmail,"onUpdate:modelValue":s[2]||(s[2]=s=>e.elCustomerEmail=s)},null,8,["placeholder","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Ho,[(0,i.Wm)(r,{placeholder:this.getLabel("customerAddressPlaceholder"),modelValue:e.elCustomerAddress,"onUpdate:modelValue":s[3]||(s[3]=s=>e.elCustomerAddress=s)},null,8,["placeholder","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Fo,[(0,i.Wm)(m,{inputOptions:e.vueTelInputOptions,modelValue:e.elCustomerPhone,"onUpdate:modelValue":s[4]||(s[4]=s=>e.elCustomerPhone=s)},null,8,["inputOptions","modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",Mo,[(0,i._)("div",Uo,[(0,i._)("div",Bo,(0,l.zw)(this.getLabel("extraInfoLabel")),1),(0,i._)("div",null,[(0,i._)("span",{class:(0,l.C_)(["customer-details-extra-info-header-btn",e.visibleExtraInfo?null:"collapsed"]),"aria-expanded":e.visibleExtraInfo?"true":"false","aria-controls":"collapse-2",onClick:s[5]||(s[5]=s=>e.visibleExtraInfo=!e.visibleExtraInfo)},[e.visibleExtraInfo?((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"fa-solid fa-circle-chevron-up"})):((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"fa-solid fa-circle-chevron-down"}))],10,qo)])]),(0,i.Wm)(f,{id:"collapse-2",class:"mt-2",modelValue:e.visibleExtraInfo,"onUpdate:modelValue":s[7]||(s[7]=s=>e.visibleExtraInfo=s)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.customFieldsList,(e=>((0,i.wg)(),(0,i.j4)(h,{key:e.key,field:e,value:n.getCustomFieldValue(e.key,e.default_value),onUpdate:n.updateCustomField},null,8,["field","value","onUpdate"])))),128)),(0,i.Wm)(d,{class:"field"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12"},{default:(0,i.w5)((()=>[(0,i._)("div",$o,[(0,i._)("label",No,(0,l.zw)(this.getLabel("customerPersonalNotesLabel")),1),(0,i.Wm)(p,{modelValue:e.elCustomerPersonalNotes,"onUpdate:modelValue":s[6]||(s[6]=s=>e.elCustomerPersonalNotes=s),modelModifiers:{lazy:!0},id:"customer_personal_notes",placeholder:this.getLabel("customerPersonalNotesPlaceholder"),rows:"3","max-rows":"6"},null,8,["modelValue","placeholder"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"save-button-wrapper"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{variant:"primary",onClick:n.save,class:"save-button"},{default:(0,i.w5)((()=>[e.isLoading?((0,i.wg)(),(0,i.j4)(g,{key:0,small:"",variant:"primary"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(this.getLabel("customerDetailsUpdateButtonLabel")),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"go-back-button-wrapper"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{variant:"outline-primary",onClick:n.close,class:"go-back-button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("customerDetailsGoBackButtonLabel")),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"save-button-result-wrapper"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{show:e.isSaved,fade:"",variant:"success"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("savedLabel")),1)])),_:1},8,["show"]),(0,i.Wm)(v,{show:e.isError,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.errorMessage),1)])),_:1},8,["show"]),(0,i.Wm)(v,{show:!e.isValid,fade:"",variant:"danger"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("validationMessage")),1)])),_:1},8,["show"])])),_:1})])),_:1})])])),_:1})}var Ro={name:"CustomerDetails",components:{CustomField:Gs},props:{customerID:{default:function(){return""}},customerFirstname:{default:function(){return""}},customerLastname:{default:function(){return""}},customerEmail:{default:function(){return""}},customerAddress:{default:function(){return""}},customerPhone:{default:function(){return""}},customerPersonalNotes:{default:function(){return""}}},mounted(){this.loadCustomFields()},data:function(){return{elCustomerFirstname:this.customerFirstname,elCustomerLastname:this.customerLastname,elCustomerEmail:this.customerEmail,elCustomerAddress:this.customerAddress,elCustomerPhone:this.customerPhone,elCustomerPersonalNotes:this.customerPersonalNotes,isValid:!0,requiredFields:[],visibleExtraInfo:!1,customFieldsList:[],elCustomFields:[],vueTelInputOptions:{placeholder:this.getLabel("customerPhonePlaceholder")},isLoading:!1,isSaved:!1,isError:!1,errorMessage:""}},methods:{close(){this.$emit("close")},save(){if(this.isValid=this.validate(),this.isValid){var e={id:this.customerID?this.customerID:0,first_name:this.elCustomerFirstname,last_name:this.elCustomerLastname,email:this.elCustomerEmail,phone:this.elCustomerPhone,address:this.elCustomerAddress,note:this.elCustomerPersonalNotes,custom_fields:this.customFieldsList};this.isLoading=!0,this.axios.put("customers/"+e.id,e).then((()=>{this.isSaved=!0,setTimeout((()=>{this.isSaved=!1}),3e3)}),(e=>{this.isError=!0,this.errorMessage=e.response.data.message,setTimeout((()=>{this.isError=!1,this.errorMessage=""}),3e3)})).finally((()=>{this.isLoading=!1}))}},validate(){return this.requiredFields=[],this.elCustomerFirstname.trim()||this.requiredFields.push("customer_first_name"),0===this.requiredFields.length},updateCustomField(e,s){let t=this.customFieldsList.find((s=>s.key===e));t?t.value=s:this.customFieldsList.push({key:e,value:s})},getCustomFieldValue(e,s){let t=this.customFieldsList.find((s=>s.key===e));return t?t.value:s},loadCustomFields(){this.axios.get("custom-fields/booking",{params:{user_profile:1,customer_id:this.customerID}}).then((e=>{this.customFieldsList=e.data.items.filter((e=>-1===["html","file"].indexOf(e.type)))}))}},emits:["close","save"]};const Zo=(0,P.Z)(Ro,[["render",Oo],["__scopeId","data-v-83889306"]]);var Ko=Zo,Qo={name:"CustomersAddressBookTab",props:{shop:{default:function(){return{}}}},components:{CustomerDetails:Ko,CustomersAddressBook:xt,ImagesList:$t},data:function(){return{isShowImages:!1,customer:null,customerData:null,editCustomer:!1}},methods:{showImages(e){this.isShowImages=!0,this.customer=e,this.$emit("hideTabsHeader",!0)},closeShowImages(e){this.isShowImages=!1,this.customerData=e,this.$emit("hideTabsHeader",!1)},edit(e){this.customer=e,this.editCustomer=!0},closeCustomerDetails(){this.editCustomer=!1,this.$refs.customersAddressBook&&this.$refs.customersAddressBook.load()}},emits:["hideTabsHeader"]};const Go=(0,P.Z)(Qo,[["render",zo]]);var Jo=Go;function Xo(e,s,t,o,a,l){const n=(0,i.up)("ShopsList");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{onApplyShop:l.applyShop},null,8,["onApplyShop"])])}const ei={class:"title"},si={class:"shops-list"},ti={key:2,class:"no-result"};function oi(e,s,t,o,a,n){const r=(0,i.up)("b-spinner"),u=(0,i.up)("ShopItem");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h5",ei,(0,l.zw)(this.getLabel("shopsTitle")),1),(0,i._)("div",si,[e.isLoading?((0,i.wg)(),(0,i.j4)(r,{key:0,variant:"primary"})):e.shopsList.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.shopsList,(e=>((0,i.wg)(),(0,i.j4)(u,{key:e.id,shop:e,onApplyShop:n.applyShop},null,8,["shop","onApplyShop"])))),128)):((0,i.wg)(),(0,i.iD)("span",ti,(0,l.zw)(this.getLabel("shopsNoResultLabel")),1))])])}const ii={class:"shop"},ai={class:"shop-name"},li={class:"shop-address"},ni={class:"shop-email"},ri={class:"shop-actions"},ui={class:"shop-phone"},di={class:"shop-actions-wrapper"},mi={class:"details-link"};function ci(e,s,t,o,a,n){const r=(0,i.up)("font-awesome-icon"),u=(0,i.up)("b-col"),d=(0,i.up)("b-row");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"shop-wrapper"},{default:(0,i.w5)((()=>[(0,i._)("div",ii,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{sm:"12",class:"shop-info"},{default:(0,i.w5)((()=>[(0,i._)("div",ai,(0,l.zw)(n.name),1),(0,i._)("div",li,(0,l.zw)(n.address),1),(0,i._)("div",ni,(0,l.zw)(n.email),1),(0,i._)("div",ri,[(0,i._)("div",ui,(0,l.zw)(n.phone),1),(0,i._)("div",di,[(0,i._)("span",mi,[(0,i.Wm)(r,{icon:"fa-solid fa-chevron-right",onClick:n.applyShop},null,8,["onClick"])])])])])),_:1})])),_:1})])])),_:1})])),_:1})}var hi={name:"ShopItem",props:{shop:{default:function(){return{}}}},computed:{name(){return this.shop.name},address(){return this.shop.address},email(){return this.shop.email},phone(){return this.shop.phone}},methods:{applyShop(){this.$emit("applyShop",this.shop)}},emits:["applyShop"]};const pi=(0,P.Z)(hi,[["render",ci],["__scopeId","data-v-36220f6c"]]);var fi=pi,gi={name:"ShopsList",data:function(){return{shopsList:[],isLoading:!1}},mounted(){this.load()},components:{ShopItem:fi},methods:{load(){this.isLoading=!0,this.shopsList=[],this.axios.get("shops").then((e=>{this.shopsList=e.data.items})).finally((()=>{this.isLoading=!1}))},applyShop(e){this.$emit("applyShop",e)}},emits:["applyShop"]};const wi=(0,P.Z)(gi,[["render",oi],["__scopeId","data-v-fc98d906"]]);var vi=wi,bi={name:"ShopsTab",components:{ShopsList:vi},methods:{applyShop(e){this.$emit("applyShop",e)}},emits:["applyShop"]};const _i=(0,P.Z)(bi,[["render",Xo]]);var ki=_i;const yi={key:0,class:"shop-title"},Li={class:"label"},Ci={class:"value"};function Si(e,s,t,o,a,n){return t.shop?((0,i.wg)(),(0,i.iD)("h4",yi,[(0,i._)("span",Li,(0,l.zw)(this.getLabel("shopTitleLabel"))+": ",1),(0,i._)("span",Ci,(0,l.zw)(n.name),1)])):(0,i.kq)("",!0)}var Wi={name:"ShopTitle",props:{shop:{default:function(){return{}}}},computed:{name(){return this.shop.name}}};const Di=(0,P.Z)(Wi,[["render",Si],["__scopeId","data-v-db67253e"]]);var Ii=Di,ji={name:"TabsList",props:{isShopsEnabled:{default:function(){return!1}}},components:{UpcomingReservationsTab:Rt,ReservationsCalendarTab:xo,CustomersAddressBookTab:Jo,ShopsTab:ki,ShopTitle:Ii},mounted(){window.addEventListener("hashchange",(()=>{this.hash=window.location.hash}));let e=this.getQueryParams();"undefined"!==typeof e["tab"]&&(this.hash="#"+e["tab"])},data:function(){return{hash:window.location.hash?window.location.hash:this.isShopsEnabled?"#shops":"#upcoming-reservations",shop:null,isHideTabsHeader:!1}},methods:{click(e){window.location.href=e},isActiveTab(e){return this.hash===e?"":void 0},applyShop(e){this.shop=e,this.$refs["upcoming-reservations-tab-link"].click(),this.$emit("applyShop",e)},hideTabsHeader(e){this.isHideTabsHeader=e}},emits:["applyShop"]};const Ai=(0,P.Z)(ji,[["render",n],["__scopeId","data-v-ddee0750"]]);var Ti=Ai,xi=t.p+"img/logo.png";const zi=e=>((0,i.dD)("data-v-400ec97c"),e=e(),(0,i.Cn)(),e),Vi=zi((()=>(0,i._)("span",{class:"logo"},[(0,i._)("img",{src:xi})],-1))),Yi={class:"text"};function Pi(e,s,t,o,a,n){const r=(0,i.up)("b-alert"),u=(0,i.up)("b-button");return(0,i.wg)(),(0,i.iD)("div",null,[e.showIOS?((0,i.wg)(),(0,i.j4)(r,{key:0,show:"",dismissible:"",variant:"secondary",class:"add-to-home-screen"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("installPWAIOSText")),1)])),_:1})):((0,i.wg)(),(0,i.j4)(r,{key:1,show:e.shown,dismissible:"",variant:"secondary",class:"add-to-home-screen"},{default:(0,i.w5)((()=>[Vi,(0,i._)("span",Yi,(0,l.zw)(this.getLabel("installPWAPromptText")),1),(0,i.Wm)(u,{onClick:n.installPWA,class:"btn-install"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("installPWAPromptInstallBtnLabel")),1)])),_:1},8,["onClick"]),(0,i.Wm)(u,{onClick:n.dismissPrompt},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(this.getLabel("installPWAPromptNoInstallBtnLabel")),1)])),_:1},8,["onClick"])])),_:1},8,["show"]))])}var Ei={data:()=>({shown:!1,showIOS:!1}),beforeMount(){window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.installEvent=e,this.shown=!0}));const e=()=>{const e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)},s=()=>"standalone"in window.navigator&&window.navigator.standalone;e()&&!s()&&(this.showIOS=!0)},methods:{dismissPrompt(){this.shown=!1},installPWA(){this.installEvent.prompt(),this.installEvent.userChoice.then((e=>{this.dismissPrompt(),e.outcome}))}}};const Hi=(0,P.Z)(Ei,[["render",Pi],["__scopeId","data-v-400ec97c"]]);var Fi=Hi,Mi={name:"App",mounted(){this.loadSettings()},computed:{isShopsEnabled(){return window.slnPWA.is_shops}},data:function(){return{settings:{},statusesList:{"sln-b-pendingpayment":{label:this.getLabel("pendingPaymentStatusLabel"),color:"#ffc107"},"sln-b-pending":{label:this.getLabel("pendingStatusLabel"),color:"#ffc107"},"sln-b-paid":{label:this.getLabel("paidStatusLabel"),color:"#28a745"},"sln-b-paylater":{label:this.getLabel("payLaterStatusLabel"),color:"#17a2b8"},"sln-b-error":{label:this.getLabel("errorStatusLabel"),color:"#dc3545"},"sln-b-canceled":{label:this.getLabel("canceledStatusLabel"),color:"#dc3545"},"sln-b-confirmed":{label:this.getLabel("confirmedStatusLabel"),color:"#28a745"}},shop:null}},watch:{shop(){this.loadSettings()}},methods:{loadSettings(){this.axios.get("app/settings",{params:{shop:this.shop?this.shop.id:null}}).then((e=>{this.settings=e.data.settings}))},applyShop(e){this.shop=e}},components:{TabsList:Ti,PWAPrompt:Fi},beforeCreate(){this.$OneSignal&&(this.$OneSignal.showSlidedownPrompt(),this.$OneSignal.on("subscriptionChange",(e=>{e&&this.$OneSignal.getUserId((e=>{e&&this.axios.put("users",{onesignal_player_id:e})}))})))}};const Ui=(0,P.Z)(Mi,[["render",a]]);var Bi=Ui,qi=t(5431);(0,qi.z)("/{SLN_PWA_DIST_PATH}/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var $i=t(65),Ni=(0,$i.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Oi=t(2026),Ri=t(3494),Zi=t(7749),Ki=t(8539),Qi=t(8429),Gi=t(4551),Ji=t(9024),Xi=t(6265),ea=t.n(Xi),sa=t(6797),ta=t.n(sa),oa={computed:{axios(){return ea().create({baseURL:window.slnPWA.api,headers:{"Access-Token":window.slnPWA.token}})},moment(){return ta()},locale(){return window.slnPWA.locale}},methods:{dateFormat(e,s){var t=this.$root.settings.date_format?this.$root.settings.date_format.js_format:null;if(!t)return e;var o=t.replace("dd","DD").replace("M","MMM").replace("mm","MM").replace("yyyy","YYYY");return ta()(e).format(s||o)},timeFormat(e){return ta()(e,"HH:mm").format(this.getTimeFormat())},getTimeFormat(){var e=this.$root.settings.time_format?this.$root.settings.time_format.js_format:null;if(e){var s=e.indexOf("p")>-1?e.replace("H","hh").replace("p","a").replace("ii","mm"):e.replace("hh","HH").replace("ii","mm");return s}},getQueryParams(){let e=window.location.search;e=e.replace("?","");let s=e.split("&").map((e=>({key:e.split("=")[0],value:e.split("=")[1]}))),t={};return s.forEach((e=>{t[e.key]=e.value})),t},getLabel(e){return window.slnPWA.labels[e]}}},ia=t(7600),aa=t(8932),la=t(1658),na=t(6020);Ri.vI.add(Ki.Zrf,Ki.WRo,Qi.hVn,Ki.Y$T,Qi.SZw,Ki._tD,Ki.$aW,Ki.WA2,Ki.Yai,Ki.LEp,Ki.FVb,Ki.r8p,Ki.dWM,Ki.XSi,Ki.Wpq,Ki._su,Ki.tAh,Ki.byT,Ki.j1w,Ki.vto,Ki.EQ8,Gi.VHX,Ki.vJI,Ki.l9f,Ki._jT,Ki.wEO,Qi.fV7);var ra=(0,o.ri)(Bi).use(Ni).use(Oi.ZP).use(na.Z).component("font-awesome-icon",Zi.GN).component("Datepicker",Ji.Z).component("vue-select",aa.Z).component("Carousel",la.lr).component("Slide",la.Mi).component("Pagination",la.tl).component("Navigation",la.W_).mixin(oa),ua=window.slnPWA.onesignal_app_id;ua&&ra.use(ia.Z,{appId:ua,serviceWorkerParam:{scope:"/{SLN_PWA_DIST_PATH}/"},serviceWorkerPath:"{SLN_PWA_DIST_PATH}/OneSignalSDKWorker.js"}),ra.mount("#app")}},s={};function t(o){var i=s[o];if(void 0!==i)return i.exports;var a=s[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.m=e,function(){var e=[];t.O=function(s,o,i,a){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],i=e[d][1],a=e[d][2];for(var n=!0,r=0;r<o.length;r++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[r])}))?o.splice(r--,1):(n=!1,a<l&&(l=a));if(n){e.splice(d--,1);var u=i();void 0!==u&&(s=u)}}return s}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,i,a]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/{SLN_PWA_DIST_PATH}/"}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,o){var i,a,l=o[0],n=o[1],r=o[2],u=0;if(l.some((function(s){return 0!==e[s]}))){for(i in n)t.o(n,i)&&(t.m[i]=n[i]);if(r)var d=r(t)}for(s&&s(o);u<l.length;u++)a=l[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},o=self["webpackChunksalon_booking_plugin_pwa"]=self["webpackChunksalon_booking_plugin_pwa"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(5396)}));o=t.O(o)})();
//# sourceMappingURL=app.js.map